(()=>{var ic=Object.create;var on=Object.defineProperty;var nc=Object.getOwnPropertyDescriptor;var oc=Object.getOwnPropertyNames;var sc=Object.getPrototypeOf,ac=Object.prototype.hasOwnProperty;var lc=(t,e)=>()=>(t&&(e=t(t=0)),e);var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var cc=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of oc(e))!ac.call(t,n)&&n!==r&&on(t,n,{get:()=>e[n],enumerable:!(i=nc(e,n))||i.enumerable});return t};var Zt=(t,e,r)=>(r=t!=null?ic(sc(t)):{},cc(e||!t||!t.__esModule?on(r,"default",{value:t,enumerable:!0}):r,t));var c,o=lc(()=>{c={PUBLIC_CDN_URL:"https://app.cdn.frill.co",PUBLIC_REGION:"us",PUBLIC_BASE_DOMAIN:"frill.co"}});var ii=T((Jd,an)=>{"use strict";o();var sn=Object.prototype.toString;an.exports=function(e){var r=sn.call(e),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&sn.call(e.callee)==="[object Function]"),i}});var gn=T((tm,hn)=>{"use strict";o();var mn;Object.keys||(gt=Object.prototype.hasOwnProperty,ni=Object.prototype.toString,ln=ii(),oi=Object.prototype.propertyIsEnumerable,cn=!oi.call({toString:null},"toString"),un=oi.call(function(){},"prototype"),yt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Jt=function(t){var e=t.constructor;return e&&e.prototype===t},fn={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},pn=(function(){if(typeof window>"u")return!1;for(var t in window)try{if(!fn["$"+t]&&gt.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Jt(window[t])}catch{return!0}}catch{return!0}return!1})(),dn=function(t){if(typeof window>"u"||!pn)return Jt(t);try{return Jt(t)}catch{return!1}},mn=function(e){var r=e!==null&&typeof e=="object",i=ni.call(e)==="[object Function]",n=ln(e),s=r&&ni.call(e)==="[object String]",a=[];if(!r&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var l=un&&i;if(s&&e.length>0&&!gt.call(e,0))for(var u=0;u<e.length;++u)a.push(String(u));if(n&&e.length>0)for(var p=0;p<e.length;++p)a.push(String(p));else for(var d in e)!(l&&d==="prototype")&&gt.call(e,d)&&a.push(String(d));if(cn)for(var g=dn(e),m=0;m<yt.length;++m)!(g&&yt[m]==="constructor")&&gt.call(e,yt[m])&&a.push(yt[m]);return a});var gt,ni,ln,oi,cn,un,yt,Jt,fn,pn,dn;hn.exports=mn});var _n=T((im,Sn)=>{"use strict";o();var fc=Array.prototype.slice,pc=ii(),yn=Object.keys,er=yn?function(e){return yn(e)}:gn(),bn=Object.keys;er.shim=function(){if(Object.keys){var e=(function(){var r=Object.keys(arguments);return r&&r.length===arguments.length})(1,2);e||(Object.keys=function(i){return pc(i)?bn(fc.call(i)):bn(i)})}else Object.keys=er;return Object.keys||er};Sn.exports=er});var bt=T((om,vn)=>{"use strict";o();var tr=Object.defineProperty||!1;if(tr)try{tr({},"a",{value:1})}catch{tr=!1}vn.exports=tr});var si=T((am,xn)=>{"use strict";o();xn.exports=SyntaxError});var Re=T((cm,wn)=>{"use strict";o();wn.exports=TypeError});var Tn=T((fm,En)=>{"use strict";o();En.exports=Object.getOwnPropertyDescriptor});var St=T((dm,In)=>{"use strict";o();var rr=Tn();if(rr)try{rr([],"length")}catch{rr=null}In.exports=rr});var ai=T((hm,Dn)=>{"use strict";o();var An=bt(),dc=si(),Ce=Re(),On=St();Dn.exports=function(e,r,i){if(!e||typeof e!="object"&&typeof e!="function")throw new Ce("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Ce("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ce("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ce("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ce("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ce("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,u=!!On&&On(e,r);if(An)An(e,r,{configurable:a===null&&u?u.configurable:!a,enumerable:n===null&&u?u.enumerable:!n,value:i,writable:s===null&&u?u.writable:!s});else if(l||!n&&!s&&!a)e[r]=i;else throw new dc("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var ci=T((ym,Nn)=>{"use strict";o();var li=bt(),Fn=function(){return!!li};Fn.hasArrayLengthDefineBug=function(){if(!li)return null;try{return li([],"length",{value:1}).length!==1}catch{return!0}};Nn.exports=Fn});var ui=T((Sm,Ln)=>{"use strict";o();var mc=_n(),hc=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",gc=Object.prototype.toString,yc=Array.prototype.concat,Rn=ai(),bc=function(t){return typeof t=="function"&&gc.call(t)==="[object Function]"},Cn=ci()(),Sc=function(t,e,r,i){if(e in t){if(i===!0){if(t[e]===r)return}else if(!bc(i)||!i())return}Cn?Rn(t,e,r,!0):Rn(t,e,r)},Pn=function(t,e){var r=arguments.length>2?arguments[2]:{},i=mc(e);hc&&(i=yc.call(i,Object.getOwnPropertySymbols(e)));for(var n=0;n<i.length;n+=1)Sc(t,i[n],e[i[n]],r[i[n]])};Pn.supportsDescriptors=!!Cn;Ln.exports=Pn});var fi=T((vm,Mn)=>{"use strict";o();Mn.exports=Object});var Wn=T((wm,kn)=>{"use strict";o();kn.exports=Error});var Kn=T((Tm,Un)=>{"use strict";o();Un.exports=EvalError});var Gn=T((Am,Bn)=>{"use strict";o();Bn.exports=RangeError});var Yn=T((Dm,$n)=>{"use strict";o();$n.exports=ReferenceError});var Hn=T((Nm,Vn)=>{"use strict";o();Vn.exports=URIError});var qn=T((Cm,jn)=>{"use strict";o();jn.exports=Math.abs});var Xn=T((Lm,zn)=>{"use strict";o();zn.exports=Math.floor});var Zn=T((km,Qn)=>{"use strict";o();Qn.exports=Math.max});var eo=T((Um,Jn)=>{"use strict";o();Jn.exports=Math.min});var ro=T((Bm,to)=>{"use strict";o();to.exports=Math.pow});var no=T(($m,io)=>{"use strict";o();io.exports=Math.round});var so=T((Vm,oo)=>{"use strict";o();oo.exports=Number.isNaN||function(e){return e!==e}});var lo=T((jm,ao)=>{"use strict";o();var _c=so();ao.exports=function(e){return _c(e)||e===0?e:e<0?-1:1}});var uo=T((zm,co)=>{"use strict";o();co.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,r);if(l.value!==n||l.enumerable!==!0)return!1}return!0}});var mo=T((Qm,po)=>{"use strict";o();var fo=typeof Symbol<"u"&&Symbol,vc=uo();po.exports=function(){return typeof fo!="function"||typeof Symbol!="function"||typeof fo("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:vc()}});var pi=T((Jm,ho)=>{"use strict";o();ho.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var di=T((th,go)=>{"use strict";o();var xc=fi();go.exports=xc.getPrototypeOf||null});var So=T((ih,bo)=>{"use strict";o();var wc="Function.prototype.bind called on incompatible ",Ec=Object.prototype.toString,Tc=Math.max,Ic="[object Function]",yo=function(e,r){for(var i=[],n=0;n<e.length;n+=1)i[n]=e[n];for(var s=0;s<r.length;s+=1)i[s+e.length]=r[s];return i},Ac=function(e,r){for(var i=[],n=r||0,s=0;n<e.length;n+=1,s+=1)i[s]=e[n];return i},Oc=function(t,e){for(var r="",i=0;i<t.length;i+=1)r+=t[i],i+1<t.length&&(r+=e);return r};bo.exports=function(e){var r=this;if(typeof r!="function"||Ec.apply(r)!==Ic)throw new TypeError(wc+r);for(var i=Ac(arguments,1),n,s=function(){if(this instanceof n){var d=r.apply(this,yo(i,arguments));return Object(d)===d?d:this}return r.apply(e,yo(i,arguments))},a=Tc(0,r.length-i.length),l=[],u=0;u<a;u++)l[u]="$"+u;if(n=Function("binder","return function ("+Oc(l,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var p=function(){};p.prototype=r.prototype,n.prototype=new p,p.prototype=null}return n}});var Pe=T((oh,_o)=>{"use strict";o();var Dc=So();_o.exports=Function.prototype.bind||Dc});var ir=T((ah,vo)=>{"use strict";o();vo.exports=Function.prototype.call});var nr=T((ch,xo)=>{"use strict";o();xo.exports=Function.prototype.apply});var Eo=T((fh,wo)=>{"use strict";o();wo.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var mi=T((dh,To)=>{"use strict";o();var Fc=Pe(),Nc=nr(),Rc=ir(),Cc=Eo();To.exports=Cc||Fc.call(Rc,Nc)});var or=T((hh,Io)=>{"use strict";o();var Pc=Pe(),Lc=Re(),Mc=ir(),kc=mi();Io.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new Lc("a function is required");return kc(Pc,Mc,e)}});var Ro=T((yh,No)=>{"use strict";o();var Wc=or(),Ao=St(),Do;try{Do=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var hi=!!Do&&Ao&&Ao(Object.prototype,"__proto__"),Fo=Object,Oo=Fo.getPrototypeOf;No.exports=hi&&typeof hi.get=="function"?Wc([hi.get]):typeof Oo=="function"?function(e){return Oo(e==null?e:Fo(e))}:!1});var ko=T((Sh,Mo)=>{"use strict";o();var Co=pi(),Po=di(),Lo=Ro();Mo.exports=Co?function(e){return Co(e)}:Po?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return Po(e)}:Lo?function(e){return Lo(e)}:null});var Uo=T((vh,Wo)=>{"use strict";o();var Uc=Function.prototype.call,Kc=Object.prototype.hasOwnProperty,Bc=Pe();Wo.exports=Bc.call(Uc,Kc)});var bi=T((wh,Vo)=>{"use strict";o();var I,Gc=fi(),$c=Wn(),Yc=Kn(),Vc=Gn(),Hc=Yn(),We=si(),ke=Re(),jc=Hn(),qc=qn(),zc=Xn(),Xc=Zn(),Qc=eo(),Zc=ro(),Jc=no(),eu=lo(),$o=Function,gi=function(t){try{return $o('"use strict"; return ('+t+").constructor;")()}catch{}},_t=St(),tu=bt(),yi=function(){throw new ke},ru=_t?(function(){try{return arguments.callee,yi}catch{try{return _t(arguments,"callee").get}catch{return yi}}})():yi,Le=mo()(),W=ko(),iu=di(),nu=pi(),Yo=nr(),vt=ir(),Me={},ou=typeof Uint8Array>"u"||!W?I:W(Uint8Array),be={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?I:ArrayBuffer,"%ArrayIteratorPrototype%":Le&&W?W([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":Me,"%AsyncGenerator%":Me,"%AsyncGeneratorFunction%":Me,"%AsyncIteratorPrototype%":Me,"%Atomics%":typeof Atomics>"u"?I:Atomics,"%BigInt%":typeof BigInt>"u"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$c,"%eval%":eval,"%EvalError%":Yc,"%Float16Array%":typeof Float16Array>"u"?I:Float16Array,"%Float32Array%":typeof Float32Array>"u"?I:Float32Array,"%Float64Array%":typeof Float64Array>"u"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?I:FinalizationRegistry,"%Function%":$o,"%GeneratorFunction%":Me,"%Int8Array%":typeof Int8Array>"u"?I:Int8Array,"%Int16Array%":typeof Int16Array>"u"?I:Int16Array,"%Int32Array%":typeof Int32Array>"u"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Le&&W?W(W([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map>"u"?I:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Le||!W?I:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Gc,"%Object.getOwnPropertyDescriptor%":_t,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?I:Promise,"%Proxy%":typeof Proxy>"u"?I:Proxy,"%RangeError%":Vc,"%ReferenceError%":Hc,"%Reflect%":typeof Reflect>"u"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?I:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Le||!W?I:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Le&&W?W(""[Symbol.iterator]()):I,"%Symbol%":Le?Symbol:I,"%SyntaxError%":We,"%ThrowTypeError%":ru,"%TypedArray%":ou,"%TypeError%":ke,"%Uint8Array%":typeof Uint8Array>"u"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?I:Uint32Array,"%URIError%":jc,"%WeakMap%":typeof WeakMap>"u"?I:WeakMap,"%WeakRef%":typeof WeakRef>"u"?I:WeakRef,"%WeakSet%":typeof WeakSet>"u"?I:WeakSet,"%Function.prototype.call%":vt,"%Function.prototype.apply%":Yo,"%Object.defineProperty%":tu,"%Object.getPrototypeOf%":iu,"%Math.abs%":qc,"%Math.floor%":zc,"%Math.max%":Xc,"%Math.min%":Qc,"%Math.pow%":Zc,"%Math.round%":Jc,"%Math.sign%":eu,"%Reflect.getPrototypeOf%":nu};if(W)try{null.error}catch(t){Ko=W(W(t)),be["%Error.prototype%"]=Ko}var Ko,su=function t(e){var r;if(e==="%AsyncFunction%")r=gi("async function () {}");else if(e==="%GeneratorFunction%")r=gi("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=gi("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&W&&(r=W(n.prototype))}return be[e]=r,r},Bo={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xt=Pe(),sr=Uo(),au=xt.call(vt,Array.prototype.concat),lu=xt.call(Yo,Array.prototype.splice),Go=xt.call(vt,String.prototype.replace),ar=xt.call(vt,String.prototype.slice),cu=xt.call(vt,RegExp.prototype.exec),uu=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fu=/\\(\\)?/g,pu=function(e){var r=ar(e,0,1),i=ar(e,-1);if(r==="%"&&i!=="%")throw new We("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new We("invalid intrinsic syntax, expected opening `%`");var n=[];return Go(e,uu,function(s,a,l,u){n[n.length]=l?Go(u,fu,"$1"):a||s}),n},du=function(e,r){var i=e,n;if(sr(Bo,i)&&(n=Bo[i],i="%"+n[0]+"%"),sr(be,i)){var s=be[i];if(s===Me&&(s=su(i)),typeof s>"u"&&!r)throw new ke("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new We("intrinsic "+e+" does not exist!")};Vo.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new ke("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ke('"allowMissing" argument must be a boolean');if(cu(/^%?[^%]*%?$/,e)===null)throw new We("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=pu(e),n=i.length>0?i[0]:"",s=du("%"+n+"%",r),a=s.name,l=s.value,u=!1,p=s.alias;p&&(n=p[0],lu(i,au([0,1],p)));for(var d=1,g=!0;d<i.length;d+=1){var m=i[d],b=ar(m,0,1),S=ar(m,-1);if((b==='"'||b==="'"||b==="`"||S==='"'||S==="'"||S==="`")&&b!==S)throw new We("property names with quotes must have matching quotes");if((m==="constructor"||!g)&&(u=!0),n+="."+m,a="%"+n+"%",sr(be,a))l=be[a];else if(l!=null){if(!(m in l)){if(!r)throw new ke("base intrinsic for "+e+" exists, but the property is not available.");return}if(_t&&d+1>=i.length){var v=_t(l,m);g=!!v,g&&"get"in v&&!("originalValue"in v.get)?l=v.get:l=l[m]}else g=sr(l,m),l=l[m];g&&!u&&(be[a]=l)}}return l}});var Xo=T((Th,zo)=>{"use strict";o();var mu=bi(),Ho=ai(),hu=ci()(),jo=St(),qo=Re(),gu=mu("%Math.floor%");zo.exports=function(e,r){if(typeof e!="function")throw new qo("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||gu(r)!==r)throw new qo("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,s=!0;if("length"in e&&jo){var a=jo(e,"length");a&&!a.configurable&&(n=!1),a&&!a.writable&&(s=!1)}return(n||s||!i)&&(hu?Ho(e,"length",r,!0,!0):Ho(e,"length",r)),e}});var Zo=T((Ah,Qo)=>{"use strict";o();var yu=Pe(),bu=nr(),Su=mi();Qo.exports=function(){return Su(yu,bu,arguments)}});var ts=T((Dh,lr)=>{"use strict";o();var _u=Xo(),Jo=bt(),vu=or(),es=Zo();lr.exports=function(e){var r=vu(arguments),i=e.length-(arguments.length-1);return _u(r,1+(i>0?i:0),!0)};Jo?Jo(lr.exports,"apply",{value:es}):lr.exports.apply=es});var is=T((Nh,rs)=>{"use strict";o();var xu=Re();rs.exports=function(e){if(e==null)throw new xu(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e}});var as=T((Ch,ss)=>{"use strict";o();var ns=bi(),os=or(),wu=os([ns("%String.prototype.indexOf%")]);ss.exports=function(e,r){var i=ns(e,!!r);return typeof i=="function"&&wu(e,".prototype.")>-1?os([i]):i}});var Si=T((Lh,cs)=>{"use strict";o();var Eu=is(),ls=as(),Tu=ls("Object.prototype.propertyIsEnumerable"),Iu=ls("Array.prototype.push");cs.exports=function(e){var r=Eu(e),i=[];for(var n in r)Tu(r,n)&&Iu(i,[n,r[n]]);return i}});var _i=T((kh,us)=>{"use strict";o();var Au=Si();us.exports=function(){return typeof Object.entries=="function"?Object.entries:Au}});var ps=T((Uh,fs)=>{"use strict";o();var Ou=_i(),Du=ui();fs.exports=function(){var e=Ou();return Du(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e}});var gs=T((Bh,hs)=>{"use strict";o();var Fu=ui(),Nu=ts(),Ru=Si(),ds=_i(),Cu=ps(),ms=Nu(ds(),Object);Fu(ms,{getPolyfill:ds,implementation:Ru,shim:Cu});hs.exports=ms});var sa=T((US,oa)=>{"use strict";o();function Bf(t,e){return Object.prototype.hasOwnProperty.call(t,e)}oa.exports=function(t,e,r,i){e=e||"&",r=r||"=";var n={};if(typeof t!="string"||t.length===0)return n;var s=/\+/g;t=t.split(e);var a=1e3;i&&typeof i.maxKeys=="number"&&(a=i.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var u=0;u<l;++u){var p=t[u].replace(s,"%20"),d=p.indexOf(r),g,m,b,S;d>=0?(g=p.substr(0,d),m=p.substr(d+1)):(g=p,m=""),b=decodeURIComponent(g),S=decodeURIComponent(m),Bf(n,b)?Array.isArray(n[b])?n[b].push(S):n[b]=[n[b],S]:n[b]=S}return n}});var la=T((BS,aa)=>{"use strict";o();var At=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};aa.exports=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(n){var s=encodeURIComponent(At(n))+r;return Array.isArray(t[n])?t[n].map(function(a){return s+encodeURIComponent(At(a))}).join(e):s+encodeURIComponent(At(t[n]))}).filter(Boolean).join(e):i?encodeURIComponent(At(i))+r+encodeURIComponent(At(t)):""}});var ca=T(Ot=>{"use strict";o();Ot.decode=Ot.parse=sa();Ot.encode=Ot.stringify=la()});var Ca=T((V_,Ra)=>{"use strict";o();var gp=function(e){return yp(e)&&!bp(e)};function yp(t){return!!t&&typeof t=="object"}function bp(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||vp(t)}var Sp=typeof Symbol=="function"&&Symbol.for,_p=Sp?Symbol.for("react.element"):60103;function vp(t){return t.$$typeof===_p}function xp(t){return Array.isArray(t)?[]:{}}function Mt(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Xe(xp(t),t,e):t}function wp(t,e,r){return t.concat(e).map(function(i){return Mt(i,r)})}function Ep(t,e){if(!e.customMerge)return Xe;var r=e.customMerge(t);return typeof r=="function"?r:Xe}function Tp(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Fa(t){return Object.keys(t).concat(Tp(t))}function Na(t,e){try{return e in t}catch{return!1}}function Ip(t,e){return Na(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function Ap(t,e,r){var i={};return r.isMergeableObject(t)&&Fa(t).forEach(function(n){i[n]=Mt(t[n],r)}),Fa(e).forEach(function(n){Ip(t,n)||(Na(t,n)&&r.isMergeableObject(e[n])?i[n]=Ep(n,r)(t[n],e[n],r):i[n]=Mt(e[n],r))}),i}function Xe(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||wp,r.isMergeableObject=r.isMergeableObject||gp,r.cloneUnlessOtherwiseSpecified=Mt;var i=Array.isArray(e),n=Array.isArray(t),s=i===n;return s?i?r.arrayMerge(t,e,r):Ap(t,e,r):Mt(e,r)}Xe.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,n){return Xe(i,n,r)},{})};var Op=Xe;Ra.exports=Op});var Ya=T((Qv,$a)=>{"use strict";o();$a.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,n,s;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(n=i;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(n of e.entries())if(!r.has(n[0]))return!1;for(n of e.entries())if(!t(n[1],r.get(n[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(n of e.entries())if(!r.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(i=e.length,i!=r.length)return!1;for(n=i;n--!==0;)if(e[n]!==r[n])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(r).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=i;n--!==0;){var a=s[n];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}});o();o();o();o();(function(){"use strict";if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(f){try{return f.defaultView&&f.defaultView.frameElement||null}catch{return null}}var e=(function(f){for(var h=f,y=t(h);y;)h=y.ownerDocument,y=t(h);return h})(window.document),r=[],i=null,n=null;function s(f){this.time=f.time,this.target=f.target,this.rootBounds=S(f.rootBounds),this.boundingClientRect=S(f.boundingClientRect),this.intersectionRect=S(f.intersectionRect||b()),this.isIntersecting=!!f.intersectionRect;var h=this.boundingClientRect,y=h.width*h.height,_=this.intersectionRect,E=_.width*_.height;y?this.intersectionRatio=Number((E/y).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function a(f,h){var y=h||{};if(typeof f!="function")throw new Error("callback must be a function");if(y.root&&y.root.nodeType!=1&&y.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=u(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=f,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(y.rootMargin),this.thresholds=this._initThresholds(y.threshold),this.root=y.root||null,this.rootMargin=this._rootMarginValues.map(function(_){return _.value+_.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a._setupCrossOriginUpdater=function(){return i||(i=function(f,h){!f||!h?n=b():n=v(f,h),r.forEach(function(y){y._checkForIntersections()})}),i},a._resetCrossOriginUpdater=function(){i=null,n=null},a.prototype.observe=function(f){var h=this._observationTargets.some(function(y){return y.element==f});if(!h){if(!(f&&f.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:f,entry:null}),this._monitorIntersections(f.ownerDocument),this._checkForIntersections()}},a.prototype.unobserve=function(f){this._observationTargets=this._observationTargets.filter(function(h){return h.element!=f}),this._unmonitorIntersections(f.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var f=this._queuedEntries.slice();return this._queuedEntries=[],f},a.prototype._initThresholds=function(f){var h=f||[0];return Array.isArray(h)||(h=[h]),h.sort().filter(function(y,_,E){if(typeof y!="number"||isNaN(y)||y<0||y>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return y!==E[_-1]})},a.prototype._parseRootMargin=function(f){var h=f||"0px",y=h.split(/\s+/).map(function(_){var E=/^(-?\d*\.?\d+)(px|%)$/.exec(_);if(!E)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(E[1]),unit:E[2]}});return y[1]=y[1]||y[0],y[2]=y[2]||y[0],y[3]=y[3]||y[1],y},a.prototype._monitorIntersections=function(f){var h=f.defaultView;if(h&&this._monitoringDocuments.indexOf(f)==-1){var y=this._checkForIntersections,_=null,E=null;this.POLL_INTERVAL?_=h.setInterval(y,this.POLL_INTERVAL):(p(h,"resize",y,!0),p(f,"scroll",y,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in h&&(E=new h.MutationObserver(y),E.observe(f,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(f),this._monitoringUnsubscribes.push(function(){var N=f.defaultView;N&&(_&&N.clearInterval(_),d(N,"resize",y,!0)),d(f,"scroll",y,!0),E&&E.disconnect()});var R=this.root&&(this.root.ownerDocument||this.root)||e;if(f!=R){var F=t(f);F&&this._monitorIntersections(F.ownerDocument)}}},a.prototype._unmonitorIntersections=function(f){var h=this._monitoringDocuments.indexOf(f);if(h!=-1){var y=this.root&&(this.root.ownerDocument||this.root)||e,_=this._observationTargets.some(function(F){var N=F.element.ownerDocument;if(N==f)return!0;for(;N&&N!=y;){var B=t(N);if(N=B&&B.ownerDocument,N==f)return!0}return!1});if(!_){var E=this._monitoringUnsubscribes[h];if(this._monitoringDocuments.splice(h,1),this._monitoringUnsubscribes.splice(h,1),E(),f!=y){var R=t(f);R&&this._unmonitorIntersections(R.ownerDocument)}}}},a.prototype._unmonitorAllIntersections=function(){var f=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var h=0;h<f.length;h++)f[h]()},a.prototype._checkForIntersections=function(){if(!(!this.root&&i&&!n)){var f=this._rootIsInDom(),h=f?this._getRootRect():b();this._observationTargets.forEach(function(y){var _=y.element,E=m(_),R=this._rootContainsTarget(_),F=y.entry,N=f&&R&&this._computeTargetAndRootIntersection(_,E,h),B=null;this._rootContainsTarget(_)?(!i||this.root)&&(B=h):B=b();var H=y.entry=new s({time:l(),target:_,boundingClientRect:E,rootBounds:B,intersectionRect:N});F?f&&R?this._hasCrossedThreshold(F,H)&&this._queuedEntries.push(H):F&&F.isIntersecting&&this._queuedEntries.push(H):this._queuedEntries.push(H)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},a.prototype._computeTargetAndRootIntersection=function(f,h,y){if(window.getComputedStyle(f).display!="none"){for(var _=h,E=w(f),R=!1;!R&&E;){var F=null,N=E.nodeType==1?window.getComputedStyle(E):{};if(N.display=="none")return null;if(E==this.root||E.nodeType==9)if(R=!0,E==this.root||E==e)i&&!this.root?!n||n.width==0&&n.height==0?(E=null,F=null,_=null):F=n:F=y;else{var B=w(E),H=B&&m(B),mt=B&&this._computeTargetAndRootIntersection(B,H,y);H&&mt?(E=B,F=v(H,mt)):(E=null,_=null)}else{var J=E.ownerDocument;E!=J.body&&E!=J.documentElement&&N.overflow!="visible"&&(F=m(E))}if(F&&(_=g(F,_)),!_)break;E=E&&w(E)}return _}},a.prototype._getRootRect=function(){var f;if(this.root&&!O(this.root))f=m(this.root);else{var h=O(this.root)?this.root:e,y=h.documentElement,_=h.body;f={top:0,left:0,right:y.clientWidth||_.clientWidth,width:y.clientWidth||_.clientWidth,bottom:y.clientHeight||_.clientHeight,height:y.clientHeight||_.clientHeight}}return this._expandRectByRootMargin(f)},a.prototype._expandRectByRootMargin=function(f){var h=this._rootMarginValues.map(function(_,E){return _.unit=="px"?_.value:_.value*(E%2?f.width:f.height)/100}),y={top:f.top-h[0],right:f.right+h[1],bottom:f.bottom+h[2],left:f.left-h[3]};return y.width=y.right-y.left,y.height=y.bottom-y.top,y},a.prototype._hasCrossedThreshold=function(f,h){var y=f&&f.isIntersecting?f.intersectionRatio||0:-1,_=h.isIntersecting?h.intersectionRatio||0:-1;if(y!==_)for(var E=0;E<this.thresholds.length;E++){var R=this.thresholds[E];if(R==y||R==_||R<y!=R<_)return!0}},a.prototype._rootIsInDom=function(){return!this.root||x(e,this.root)},a.prototype._rootContainsTarget=function(f){var h=this.root&&(this.root.ownerDocument||this.root)||e;return x(h,f)&&(!this.root||h==f.ownerDocument)},a.prototype._registerInstance=function(){r.indexOf(this)<0&&r.push(this)},a.prototype._unregisterInstance=function(){var f=r.indexOf(this);f!=-1&&r.splice(f,1)};function l(){return window.performance&&performance.now&&performance.now()}function u(f,h){var y=null;return function(){y||(y=setTimeout(function(){f(),y=null},h))}}function p(f,h,y,_){typeof f.addEventListener=="function"?f.addEventListener(h,y,_||!1):typeof f.attachEvent=="function"&&f.attachEvent("on"+h,y)}function d(f,h,y,_){typeof f.removeEventListener=="function"?f.removeEventListener(h,y,_||!1):typeof f.detachEvent=="function"&&f.detachEvent("on"+h,y)}function g(f,h){var y=Math.max(f.top,h.top),_=Math.min(f.bottom,h.bottom),E=Math.max(f.left,h.left),R=Math.min(f.right,h.right),F=R-E,N=_-y;return F>=0&&N>=0&&{top:y,bottom:_,left:E,right:R,width:F,height:N}||null}function m(f){var h;try{h=f.getBoundingClientRect()}catch{}return h?(h.width&&h.height||(h={top:h.top,right:h.right,bottom:h.bottom,left:h.left,width:h.right-h.left,height:h.bottom-h.top}),h):b()}function b(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function S(f){return!f||"x"in f?f:{top:f.top,y:f.top,bottom:f.bottom,left:f.left,x:f.left,right:f.right,width:f.width,height:f.height}}function v(f,h){var y=h.top-f.top,_=h.left-f.left;return{top:y,left:_,height:h.height,width:h.width,bottom:y+h.height,right:_+h.width}}function x(f,h){for(var y=h;y;){if(y==f)return!0;y=w(y)}return!1}function w(f){var h=f.parentNode;return f.nodeType==9&&f!=e?t(f):(h&&h.assignedSlot&&(h=h.assignedSlot.parentNode),h&&h.nodeType==11&&h.host?h.host:h)}function O(f){return f&&f.nodeType===9}window.IntersectionObserver=a,window.IntersectionObserverEntry=s})();var ys=Zt(gs());o();(function(){typeof globalThis!="object"&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();o();Array.prototype.findLast||Object.defineProperty(Array.prototype,"findLast",{configurable:!0,writable:!0,value:function(t,e){if(this==null)throw new TypeError("Array.prototype.findLast called on null or undefined");if(typeof t!="function")throw new TypeError("predicate must be a function");let r=Object(this),i=r.length>>>0;for(let n=i-1;n>=0;n--){let s=r[n];if(t.call(e,s,n,r))return s}}});Object.entries||ys.default.shim();o();o();o();o();o();o();o();o();o();o();o();var Pu=Math.pow(10,8)*24*60*60*1e3,zh=-Pu,cr=6048e5,bs=864e5,vi=6e4,xi=36e5;var wt=43200,wi=1440;var Lu=3600;var Ss=Lu*24,Xh=Ss*7,Mu=Ss*365.2425,ku=Mu/12,Qh=ku*3,Ei=Symbol.for("constructDateFrom");function U(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Ei in t?t[Ei](e):t instanceof Date?new t.constructor(e):new Date(e)}function ee(t,...e){let r=U.bind(null,t||e.find(i=>typeof i=="object"));return e.map(r)}o();o();o();function A(t,e){return U(e||t,t)}function Ue(t){let e=A(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}o();function Ti(t,e){let r=A(t,e?.in);return r.setHours(0,0,0,0),r}function ur(t,e,r){let[i,n]=ee(r?.in,t,e),s=Ti(i),a=Ti(n),l=+s-Ue(s),u=+a-Ue(a);return Math.round((l-u)/bs)}function vs(t,e,r){let[i,n]=ee(r?.in,t,e),s=_s(i,n),a=Math.abs(ur(i,n));i.setDate(i.getDate()-s*a);let l=+(_s(i,n)===-s),u=s*(a-l);return u===0?0:u}function _s(t,e){let r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}o();o();o();o();var Wu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xs=(t,e,r)=>{let i,n=Wu[t];return typeof n=="string"?i=n:e===1?i=n.one:i=n.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};o();o();function fr(t){return(e={})=>{let r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var Uu={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ku={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Bu={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ws={date:fr({formats:Uu,defaultWidth:"full"}),time:fr({formats:Ku,defaultWidth:"full"}),dateTime:fr({formats:Bu,defaultWidth:"full"})};o();var Gu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Es=(t,e,r,i)=>Gu[t];o();o();function Ke(t){return(e,r)=>{let i=r?.context?String(r.context):"standalone",n;if(i==="formatting"&&t.formattingValues){let a=t.defaultFormattingWidth||t.defaultWidth,l=r?.width?String(r.width):a;n=t.formattingValues[l]||t.formattingValues[a]}else{let a=t.defaultWidth,l=r?.width?String(r.width):t.defaultWidth;n=t.values[l]||t.values[a]}let s=t.argumentCallback?t.argumentCallback(e):e;return n[s]}}var $u={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yu={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Vu={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hu={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ju={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zu=(t,e)=>{let r=Number(t),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ts={ordinalNumber:zu,era:Ke({values:$u,defaultWidth:"wide"}),quarter:Ke({values:Yu,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ke({values:Vu,defaultWidth:"wide"}),day:Ke({values:Hu,defaultWidth:"wide"}),dayPeriod:Ke({values:ju,defaultWidth:"wide",formattingValues:qu,defaultFormattingWidth:"wide"})};o();o();function Be(t){return(e,r={})=>{let i=r.width,n=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],s=e.match(n);if(!s)return null;let a=s[0],l=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?Qu(l,g=>g.test(a)):Xu(l,g=>g.test(a)),p;p=t.valueCallback?t.valueCallback(u):u,p=r.valueCallback?r.valueCallback(p):p;let d=e.slice(a.length);return{value:p,rest:d}}}function Xu(t,e){for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Qu(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}o();function Is(t){return(e,r={})=>{let i=e.match(t.matchPattern);if(!i)return null;let n=i[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=r.valueCallback?r.valueCallback(a):a;let l=e.slice(n.length);return{value:a,rest:l}}}var Zu=/^(\d+)(th|st|nd|rd)?/i,Ju=/\d+/i,ef={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tf={any:[/^b/i,/^(a|c)/i]},rf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nf={any:[/1/i,/2/i,/3/i,/4/i]},of={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},af={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},As={ordinalNumber:Is({matchPattern:Zu,parsePattern:Ju,valueCallback:t=>parseInt(t,10)}),era:Be({matchPatterns:ef,defaultMatchWidth:"wide",parsePatterns:tf,defaultParseWidth:"any"}),quarter:Be({matchPatterns:rf,defaultMatchWidth:"wide",parsePatterns:nf,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Be({matchPatterns:of,defaultMatchWidth:"wide",parsePatterns:sf,defaultParseWidth:"any"}),day:Be({matchPatterns:af,defaultMatchWidth:"wide",parsePatterns:lf,defaultParseWidth:"any"}),dayPeriod:Be({matchPatterns:cf,defaultMatchWidth:"any",parsePatterns:uf,defaultParseWidth:"any"})};var Et={code:"en-US",formatDistance:xs,formatLong:ws,formatRelative:Es,localize:Ts,match:As,options:{weekStartsOn:0,firstWeekContainsDate:1}};o();var ff={};function te(){return ff}o();o();o();function Os(t,e){let r=A(t,e?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Ds(t,e){let r=A(t,e?.in);return ur(r,Os(r))+1}o();o();o();function re(t,e){let r=te(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,n=A(t,e?.in),s=n.getDay(),a=(s<i?7:0)+s-i;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function Se(t,e){return re(t,{...e,weekStartsOn:1})}o();o();function pr(t,e){let r=A(t,e?.in),i=r.getFullYear(),n=U(r,0);n.setFullYear(i+1,0,4),n.setHours(0,0,0,0);let s=Se(n),a=U(r,0);a.setFullYear(i,0,4),a.setHours(0,0,0,0);let l=Se(a);return r.getTime()>=s.getTime()?i+1:r.getTime()>=l.getTime()?i:i-1}function Fs(t,e){let r=pr(t,e),i=U(e?.in||t,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),Se(i)}function Ns(t,e){let r=A(t,e?.in),i=+Se(r)-+Fs(r);return Math.round(i/cr)+1}o();o();o();function dr(t,e){let r=A(t,e?.in),i=r.getFullYear(),n=te(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=U(e?.in||t,0);a.setFullYear(i+1,0,s),a.setHours(0,0,0,0);let l=re(a,e),u=U(e?.in||t,0);u.setFullYear(i,0,s),u.setHours(0,0,0,0);let p=re(u,e);return+r>=+l?i+1:+r>=+p?i:i-1}function Rs(t,e){let r=te(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,n=dr(t,e),s=U(e?.in||t,0);return s.setFullYear(n,0,i),s.setHours(0,0,0,0),re(s,e)}function Cs(t,e){let r=A(t,e?.in),i=+re(r,e)-+Rs(r,e);return Math.round(i/cr)+1}o();function D(t,e){let r=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return r+i}o();var ie={y(t,e){let r=t.getFullYear(),i=r>0?r:1-r;return D(e==="yy"?i%100:i,e.length)},M(t,e){let r=t.getMonth();return e==="M"?String(r+1):D(r+1,2)},d(t,e){return D(t.getDate(),e.length)},a(t,e){let r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h(t,e){return D(t.getHours()%12||12,e.length)},H(t,e){return D(t.getHours(),e.length)},m(t,e){return D(t.getMinutes(),e.length)},s(t,e){return D(t.getSeconds(),e.length)},S(t,e){let r=e.length,i=t.getMilliseconds(),n=Math.trunc(i*Math.pow(10,r-3));return D(n,e.length)}};var Ge={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ii={G:function(t,e,r){let i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){let i=t.getFullYear(),n=i>0?i:1-i;return r.ordinalNumber(n,{unit:"year"})}return ie.y(t,e)},Y:function(t,e,r,i){let n=dr(t,i),s=n>0?n:1-n;if(e==="YY"){let a=s%100;return D(a,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):D(s,e.length)},R:function(t,e){let r=pr(t);return D(r,e.length)},u:function(t,e){let r=t.getFullYear();return D(r,e.length)},Q:function(t,e,r){let i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return D(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,r){let i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return D(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,r){let i=t.getMonth();switch(e){case"M":case"MM":return ie.M(t,e);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,r){let i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return D(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,r,i){let n=Cs(t,i);return e==="wo"?r.ordinalNumber(n,{unit:"week"}):D(n,e.length)},I:function(t,e,r){let i=Ns(t);return e==="Io"?r.ordinalNumber(i,{unit:"week"}):D(i,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ie.d(t,e)},D:function(t,e,r){let i=Ds(t);return e==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):D(i,e.length)},E:function(t,e,r){let i=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,r,i){let n=t.getDay(),s=(n-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return D(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(t,e,r,i){let n=t.getDay(),s=(n-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return D(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(t,e,r){let i=t.getDay(),n=i===0?7:i;switch(e){case"i":return String(n);case"ii":return D(n,e.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,r){let n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,r){let i=t.getHours(),n;switch(i===12?n=Ge.noon:i===0?n=Ge.midnight:n=i/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,r){let i=t.getHours(),n;switch(i>=17?n=Ge.evening:i>=12?n=Ge.afternoon:i>=4?n=Ge.morning:n=Ge.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return ie.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ie.H(t,e)},K:function(t,e,r){let i=t.getHours()%12;return e==="Ko"?r.ordinalNumber(i,{unit:"hour"}):D(i,e.length)},k:function(t,e,r){let i=t.getHours();return i===0&&(i=24),e==="ko"?r.ordinalNumber(i,{unit:"hour"}):D(i,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ie.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ie.s(t,e)},S:function(t,e){return ie.S(t,e)},X:function(t,e,r){let i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Ls(i);case"XXXX":case"XX":return _e(i);default:return _e(i,":")}},x:function(t,e,r){let i=t.getTimezoneOffset();switch(e){case"x":return Ls(i);case"xxxx":case"xx":return _e(i);default:return _e(i,":")}},O:function(t,e,r){let i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ps(i,":");default:return"GMT"+_e(i,":")}},z:function(t,e,r){let i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ps(i,":");default:return"GMT"+_e(i,":")}},t:function(t,e,r){let i=Math.trunc(+t/1e3);return D(i,e.length)},T:function(t,e,r){return D(+t,e.length)}};function Ps(t,e=""){let r=t>0?"-":"+",i=Math.abs(t),n=Math.trunc(i/60),s=i%60;return s===0?r+String(n):r+String(n)+e+D(s,2)}function Ls(t,e){return t%60===0?(t>0?"-":"+")+D(Math.abs(t)/60,2):_e(t,e)}function _e(t,e=""){let r=t>0?"-":"+",i=Math.abs(t),n=D(Math.trunc(i/60),2),s=D(i%60,2);return r+n+e+s}o();var Ms=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},ks=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},pf=(t,e)=>{let r=t.match(/(P+)(p+)?/)||[],i=r[1],n=r[2];if(!n)return Ms(t,e);let s;switch(i){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Ms(i,e)).replace("{{time}}",ks(n,e))},Ws={p:ks,P:pf};o();var df=/^D+$/,mf=/^Y+$/,hf=["D","DD","YY","YYYY"];function Us(t){return df.test(t)}function Ks(t){return mf.test(t)}function Bs(t,e,r){let i=gf(t,e,r);if(console.warn(i),hf.includes(t))throw new RangeError(i)}function gf(t,e,r){let i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}o();o();function Gs(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $s(t){return!(!Gs(t)&&typeof t!="number"||isNaN(+A(t)))}var yf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sf=/^'([^]*?)'?$/,_f=/''/g,vf=/[a-zA-Z]/;function Ys(t,e,r){let i=te(),n=r?.locale??i.locale??Et,s=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,l=A(t,r?.in);if(!$s(l))throw new RangeError("Invalid time value");let u=e.match(bf).map(d=>{let g=d[0];if(g==="p"||g==="P"){let m=Ws[g];return m(d,n.formatLong)}return d}).join("").match(yf).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let g=d[0];if(g==="'")return{isToken:!1,value:xf(d)};if(Ii[g])return{isToken:!0,value:d};if(g.match(vf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:d}});n.localize.preprocessor&&(u=n.localize.preprocessor(l,u));let p={firstWeekContainsDate:s,weekStartsOn:a,locale:n};return u.map(d=>{if(!d.isToken)return d.value;let g=d.value;(!r?.useAdditionalWeekYearTokens&&Ks(g)||!r?.useAdditionalDayOfYearTokens&&Us(g))&&Bs(g,e,String(t));let m=Ii[g[0]];return m(l,g,n.localize,p)}).join("")}function xf(t){let e=t.match(Sf);return e?e[1].replace(_f,"'"):t}o();o();function Vs(t){return U(t,Date.now())}o();o();function $e(t,e){let r=+A(t)-+A(e);return r<0?-1:r>0?1:r}o();o();function Hs(t,e,r){let[i,n]=ee(r?.in,t,e),s=i.getFullYear()-n.getFullYear(),a=i.getMonth()-n.getMonth();return s*12+a}o();o();function js(t,e){let r=A(t,e?.in);return r.setHours(23,59,59,999),r}o();function qs(t,e){let r=A(t,e?.in),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}function zs(t,e){let r=A(t,e?.in);return+js(r,e)==+qs(r,e)}function Xs(t,e,r){let[i,n,s]=ee(r?.in,t,t,e),a=$e(n,s),l=Math.abs(Hs(n,s));if(l<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*l);let u=$e(n,s)===-a;zs(i)&&l===1&&$e(i,s)===1&&(u=!1);let p=a*(l-+u);return p===0?0:p}o();o();function Qs(t){return e=>{let i=(t?Math[t]:Math.trunc)(e);return i===0?0:i}}o();function Zs(t,e){return+A(t)-+A(e)}function Js(t,e,r){let i=Zs(t,e)/1e3;return Qs(r?.roundingMethod)(i)}function ea(t,e,r){let i=te(),n=r?.locale??i.locale??Et,s=2520,a=$e(t,e);if(isNaN(a))throw new RangeError("Invalid time value");let l=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:a}),[u,p]=ee(r?.in,...a>0?[e,t]:[t,e]),d=Js(p,u),g=(Ue(p)-Ue(u))/1e3,m=Math.round((d-g)/60),b;if(m<2)return r?.includeSeconds?d<5?n.formatDistance("lessThanXSeconds",5,l):d<10?n.formatDistance("lessThanXSeconds",10,l):d<20?n.formatDistance("lessThanXSeconds",20,l):d<40?n.formatDistance("halfAMinute",0,l):d<60?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",1,l):m===0?n.formatDistance("lessThanXMinutes",1,l):n.formatDistance("xMinutes",m,l);if(m<45)return n.formatDistance("xMinutes",m,l);if(m<90)return n.formatDistance("aboutXHours",1,l);if(m<wi){let S=Math.round(m/60);return n.formatDistance("aboutXHours",S,l)}else{if(m<s)return n.formatDistance("xDays",1,l);if(m<wt){let S=Math.round(m/wi);return n.formatDistance("xDays",S,l)}else if(m<wt*2)return b=Math.round(m/wt),n.formatDistance("aboutXMonths",b,l)}if(b=Xs(p,u),b<12){let S=Math.round(m/wt);return n.formatDistance("xMonths",S,l)}else{let S=b%12,v=Math.trunc(b/12);return S<3?n.formatDistance("aboutXYears",v,l):S<9?n.formatDistance("overXYears",v,l):n.formatDistance("almostXYears",v+1,l)}}function ta(t,e){return ea(t,Vs(t),e)}o();function ra(t,e){let r=()=>U(e?.in,NaN),i=e?.additionalDigits??2,n=If(t),s;if(n.date){let p=Af(n.date,i);s=Of(p.restDateString,p.year)}if(!s||isNaN(+s))return r();let a=+s,l=0,u;if(n.time&&(l=Df(n.time),isNaN(l)))return r();if(n.timezone){if(u=Ff(n.timezone),isNaN(u))return r()}else{let p=new Date(a+l),d=A(0,e?.in);return d.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),d.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),d}return A(a+l+u,e?.in)}var mr={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},wf=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ef=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Tf=/^([+-])(\d{2})(?::?(\d{2}))?$/;function If(t){let e={},r=t.split(mr.dateTimeDelimiter),i;if(r.length>2)return e;if(/:/.test(r[0])?i=r[0]:(e.date=r[0],i=r[1],mr.timeZoneDelimiter.test(e.date)&&(e.date=t.split(mr.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){let n=mr.timezone.exec(i);n?(e.time=i.replace(n[1],""),e.timezone=n[1]):e.time=i}return e}function Af(t,e){let r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(r);if(!i)return{year:NaN,restDateString:""};let n=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?n:s*100,restDateString:t.slice((i[1]||i[2]).length)}}function Of(t,e){if(e===null)return new Date(NaN);let r=t.match(wf);if(!r)return new Date(NaN);let i=!!r[4],n=Tt(r[1]),s=Tt(r[2])-1,a=Tt(r[3]),l=Tt(r[4]),u=Tt(r[5])-1;if(i)return Lf(e,l,u)?Nf(e,l,u):new Date(NaN);{let p=new Date(0);return!Cf(e,s,a)||!Pf(e,n)?new Date(NaN):(p.setUTCFullYear(e,s,Math.max(n,a)),p)}}function Tt(t){return t?parseInt(t):1}function Df(t){let e=t.match(Ef);if(!e)return NaN;let r=Ai(e[1]),i=Ai(e[2]),n=Ai(e[3]);return Mf(r,i,n)?r*xi+i*vi+n*1e3:NaN}function Ai(t){return t&&parseFloat(t.replace(",","."))||0}function Ff(t){if(t==="Z")return 0;let e=t.match(Tf);if(!e)return 0;let r=e[1]==="+"?-1:1,i=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return kf(i,n)?r*(i*xi+n*vi):NaN}function Nf(t,e,r){let i=new Date(0);i.setUTCFullYear(t,0,4);let n=i.getUTCDay()||7,s=(e-1)*7+r+1-n;return i.setUTCDate(i.getUTCDate()+s),i}var Rf=[31,null,31,30,31,30,31,31,30,31,30,31];function ia(t){return t%400===0||t%4===0&&t%100!==0}function Cf(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(Rf[e]||(ia(t)?29:28))}function Pf(t,e){return e>=1&&e<=(ia(t)?366:365)}function Lf(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function Mf(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function kf(t,e){return e>=0&&e<=59}var Wf={default:"MMM d 'at' h:mm a",defaultWithDayOfWeek:"EEEE, MMM d 'at' h:mm a",dateTime:"yyyy-MM-dd HH:mm",dateTitle:"MMM d, yyyy 'at' h:mm a",day:"EEE",month:"MMM",monthDay:"MMM d",monthDayYear:"MMM d, yyyy",dayOfYear:"D",logger:"h:mm:ss.SS"};function hr(t,e,r={}){let{fallback:i,...n}=r;return i&&(t=Kf(t)?t:i),e==="display"?Uf(t,n):Ys(t,Wf[e],n)}function Uf(t,e){let r=It(t),i=new Date;if(vs(i,r)<29){let s=na(r);return s==="just now"?s:`${s} ago`}return r.getFullYear()!==i.getFullYear()?hr(r,"monthDayYear",e):hr(r,"monthDay",e)}function gr(t){let e=ra(t);return na(e)}function na(t){let e=ta(t,{includeSeconds:!0});switch(e){case"less than 5 seconds":case"less than 10 seconds":case"less than 20 seconds":return"just now";case"half a minute":case"less than a minute":return"about a minute";case"1 minute":return"a minute";case"about 1 hour":return"about an hour";case"1 day":return"a day";case"about 1 month":return"about a month";case"about 1 year":case"over 1 year":return"about a year"}return e}function It(t){return t instanceof Date?t:new Date(typeof t=="string"?t.replace(/ /g,"T"):t)}function Kf(t){return!!t&&!isNaN(Number(It(t)))}o();var wr=Zt(ca());o();o();var Oi=typeof process>"u"?c:process.env;var ua="FRILL_ENV";function P(t,e=""){return typeof Oi<"u"&&t in Oi?Oi[t]??e:typeof window<"u"&&window[ua]?window[ua][t]??e:e}var ne=!1,Di=!0,Fi=!1,Ni="production";var fa=Di&&Ni==="production",Gf="60b7f47048ba38473bb8109ccde4ea8e3af4491c",$f="21258053643",pa=`${Gf}.${$f}`,qS=P("PUBLIC_CDN_URL","").replace(/\/+$/,""),Yf=P("PUBLIC_CDN_ASSETS_URL","").replace(/\/+$/,""),zS=P("PUBLIC_S3_ORIGIN","").replace(/\/+$/,""),XS=`${Yf}/og-image`,$=typeof window>"u",QS=!$&&navigator&&navigator.appVersion?.indexOf("Win")!=-1,ZS=$?!0:navigator&&navigator.userAgent.includes("Macintosh"),JS=!$&&navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var Dt=P("PUBLIC_BASE_DOMAIN","frill.co");var e_=P("PUBLIC_APP_GTM_ID"),t_=P("PUBLIC_RECAPTCHA_SITE_KEY","6Ldv-pYeAAAAAHsbtJj9KbmdfJmJlusp8UBUPNcC"),r_=P("PUBLIC_HELP_SCOUT_ID"),i_=P("PUBLIC_CUSTOMER_IO_ID"),n_=P("PUBLIC_USERMAVEN_KEY");var Vf="app",Hf="feedback";var jf="widget";var qf=`${Vf}.${Dt}`,o_=`${Hf}.${Dt}`,yr=`${jf}.${Dt}`;var pe="#ef567c";var s_=P("PUBLIC_REGION","us"),a_=P("PUBLIC_CUSTOM_DOMAIN_CNAME",""),l_=P("PUBLIC_HOMEPAGE_URL","https://frill.co"),c_=P("PUBLIC_HOMEPAGE_URL","https://frill.co/pricing"),u_=P("PUBLIC_FEEDBACK_URL","https://feedback.frill.co"),f_=P("PUBLIC_NOTIFICATIONS_EMAIL","notifications@frill.co"),zf=P("PUBLIC_SUPPORT_EMAIL","support@frill.co"),p_=`mailto:${zf}`,br={HOME:"https://help.frill.co",DEVELOPER_DOCS:"https://developers.frill.co",DEVELOPER_DOCS_FRILL_SCRIPT:"https://developers.frill.co/frill-script",DEVELOPER_DOCS_WIDGETS:"https://developers.frill.co/frill-script/widgets",DEVELOPER_DOCS_SURVEYS:"https://developers.frill.co/frill-script/surveys",DEVELOPER_DOCS_IDENTIFY_USERS:"https://developers.frill.co/frill-script/identifying-users",GETTING_STARTED:"https://help.frill.co/category/62-getting-started",LANGUAGES_TERMINOLOGY:"https://help.frill.co/article/124-languages-terminology",THEMES:"https://help.frill.co/article/123-themes",TEAMMATES:"https://help.frill.co/article/299-adding-teammates",IMPORT_IDEAS_FROM_CANNY:"https://help.frill.co/article/116-import-ideas-from-canny",SSO:"https://help.frill.co/article/65-sso-implementation",SSO_FRILL:"https://help.frill.co/article/65-sso-implementation",SSO_OKTA:"https://help.frill.co/article/281-okta-sso",SSO_MS_ENTRA_ID:"https://help.frill.co/article/284-microsoft-entra-id-sso",WIDGET:"https://help.frill.co/article/75-adding-the-widget",WIDGET_SSO:"https://help.frill.co/article/97-widget-sso",WIDGET_GTM:"https://help.frill.co/article/225-using-google-tag-manager-to-install-the-frill-script",FRILL_SCRIPT:"https://help.frill.co/article/224-introduction-to-the-frill-script",SURVEYS:"https://help.frill.co/article/224-introduction-to-the-frill-script",WIDGET_LEGACY:"https://help.frill.co/article/235-legacy-widgets",WIDGET_TARGETING:"https://help.frill.co/article/236-survey-and-widget-targeting",DOMAINS:"https://help.frill.co/article/88-setting-up-a-custom-domain",WEBHOOKS:"https://help.frill.co/article/93-webhooks",EMAILS:"https://help.frill.co/article/114-setting-up-a-custom-email-domain",AUTHENTICATION:"https://help.frill.co/article/99-different-types-of-authentication",FEEDBACK_BEACONS:"https://help.frill.co/article/126-feedback-beacons",IDEA_POLLS:"https://help.frill.co/article/159-idea-polls",INTEGRATIONS_INTERCOM:"https://help.frill.co/article/133-intercom-integration",INTEGRATIONS_LINEAR:"https://help.frill.co/article/255-getting-started-with-the-linear-integration",INTEGRATIONS_HELPSCOUT:"https://help.frill.co/article/149-frill-helpscout-integration",INTEGRATIONS_ZAPIER:"https://help.frill.co/article/152-zapier-integration-for-frill",INTEGRATIONS_SLACK:"https://help.frill.co/article/256-getting-started-with-the-slack-integration",PRIORITY_SCORE:"https://help.frill.co/article/145-how-does-prioritization-work",MAINTENANCE_MAR_16:"https://help.frill.co/article/200-scheduled-maintenance-march-16th-2024",CUSTOM_ATTRIBUTES:"https://help.frill.co/article/204-adding-custom-user-attributes-for-segmentation",ANNOUNCEMENT_EMBED:"https://help.frill.co/article/266-announcement-video-embed"};var d_=P("PUBLIC_SUPERADMIN_URL","https://superadmin.frill.co");var m_={bytes:1024*1024*2,label:"2Mb"},h_={bytes:1024*1024*10,label:"10Mb"};var da=`https://${yr}/v2/container.js`,Xf="1bf67472-9599-41a6-ad34-8da764de1400",Qf="0396712f-62eb-4c24-9aa3-1ae5de300f1b",Zf=fa?Xf:Qf,g_=P("PUBLIC_WIDGET_CONTAINER_KEY",Zf),Jf="4a6fcdb8-aa13-4312-8d44-6959c3cdbbfe",ep="24efd277-8b95-4da8-8ff7-1707dc11069f",tp=fa?Jf:ep,y_=P("PUBLIC_FEEDBACK_WIDGET_KEY",tp),rp=`https://${yr}/v2/widget.js`,Ft={IDEA:"f-idea",ANNOUNCEMENT:"f-announcement",SECTION:"f-section",OPEN:"f-open"};var K={HOME:"/",SIGNUP:"/signup",LOGIN:"/login",LOGIN_SSO:"/login/sso",LOGIN_TEAM:"/login/team",LOGIN_ONE_TIME_CODE:"/login/code",FORGOT_PASSWORD:"/forgot-password",RESET_PASSWORD:"/reset-password",TERMS_OF_SERVICE:"/terms-of-service",PRIVACY_POLICY:"/privacy-policy",APPSUMO_SIGNUP:"/appsumo/signup",DASHBOARD:"/dashboard",DASHBOARD_INBOX:"/dashboard/inbox",DASHBOARD_INBOX_TAB:"/dashboard/inbox/[tab]",DASHBOARD_INBOX_IDEAS:"/dashboard/inbox/ideas",DASHBOARD_INBOX_COMMENTS:"/dashboard/inbox/comments",DASHBOARD_INBOX_MENTIONS:"/dashboard/inbox/mentions",DASHBOARD_INBOX_USERS:"/dashboard/inbox/users",DASHBOARD_USERS:"/dashboard/users",DASHBOARD_VIEW_USER:"/dashboard/users/[id]",DASHBOARD_SEGMENT:"/dashboard/users/segment/[segment]",DASHBOARD_SEGMENT_VIEW_USER:"/dashboard/users/segment/[segment]/[id]",DASHBOARD_PRIORITY_MATRIX:"/dashboard/prioritization-matrix",DASHBOARD_WIDGETS:"/dashboard/widgets",DASHBOARD_WIDGET_VIEW:"/dashboard/widgets/[widgetId]",DASHBOARD_WIDGET_EDIT:"/dashboard/widgets/[widgetId]/edit",DASHBOARD_SURVEYS:"/dashboard/surveys",DASHBOARD_SURVEYS_NEW:"/dashboard/surveys/[containerId]/new",DASHBOARD_SURVEY_VIEW:"/dashboard/surveys/[surveyId]",DASHBOARD_SURVEY_RESPONSES:"/dashboard/surveys/[surveyId]/responses",DASHBOARD_SURVEY_EDIT:"/dashboard/surveys/[surveyId]/edit",DASHBOARD_ONBOARDING:"/dashboard/onboarding",CHOOSE_COMPANY:"/company",CREATE_COMPANY:"/company/new",CREATE_COMPANY_ONBOARDING:"/company/new/[step]",SWITCH_COMPANY:"/company/switch",VIEW_IDEA:"/board/[ideaSlug]",VIEW_BOARD:"/b/[boardId]/[boardSlug]",VIEW_BOARD_IDEA:"/b/[boardId]/[boardSlug]/[ideaSlug]",BOARD_NEW_IDEA:"/b/[boardId]/[boardSlug]/idea/new",VIEW_ROADMAP:"/roadmap",VIEW_ROADMAP_IDEA:"/roadmap/[ideaSlug]",ROADMAP_NEW_IDEA:"/roadmap/idea/new",VIEW_ANNOUNCEMENTS:"/announcements",NEW_ANNOUNCEMENT:"/announcements/new",EDIT_ANNOUNCEMENT:"/announcements/edit/[announcementSlug]",VIEW_ANNOUNCEMENT:"/announcements/[announcementSlug]",SETTINGS:"/settings",SETTINGS_PROFILE:"/settings/profile",SETTINGS_MY_CONTENT:"/settings/my-content",SETTINGS_MY_CONTENT_IDEAS:"/settings/my-content/ideas",SETTINGS_MY_CONTENT_COMMENTS:"/settings/my-content/comments",SETTINGS_MY_CONTENT_VOTES:"/settings/my-content/votes",SETTINGS_NOTIFICATIONS:"/settings/notifications",SETTINGS_UNSUBSCRIBE:"/settings/unsubscribe",SETTINGS_COMPANY:"/settings/company",SETTINGS_DESIGN_SYSTEM:"/settings/design-system",SETTINGS_COMPANY_AUTHENTICATION:"/settings/company/authentication",SETTINGS_COMPANY_BOARDS:"/settings/company/boards",SETTINGS_COMPANY_TEAM:"/settings/company/team",SETTINGS_COMPANY_USERS:"/settings/company/users",SETTINGS_COMPANY_BILLING:"/settings/company/billing",SETTINGS_COMPANY_UPGRADE:"/settings/company/upgrade",SETTINGS_COMPANY_TOPICS:"/settings/company/topics",SETTINGS_COMPANY_STATUSES:"/settings/company/statuses",SETTINGS_COMPANY_CATEGORIES:"/settings/company/categories",SETTINGS_COMPANY_MISCELLANEOUS:"/settings/company/miscellaneous",SETTINGS_COMPANY_SSO:"/settings/company/sso",SETTINGS_COMPANY_SSO_FRILL:"/settings/company/sso/frill",SETTINGS_COMPANY_SSO_OKTA:"/settings/company/sso/okta",SETTINGS_COMPANY_SSO_ENTRA:"/settings/company/sso/microsoft-entra-id",SETTINGS_COMPANY_EMAILS:"/settings/company/emails",SETTINGS_COMPANY_EMAILS_TEMPLATES:"/settings/company/emails/templates",SETTINGS_COMPANY_EMAILS_TEMPLATE_EDIT:"/settings/company/emails/templates/[id]",SETTINGS_COMPANY_EMAILS_BRANDING:"/settings/company/emails/branding",SETTINGS_COMPANY_EMAILS_CUSTOM_EMAIL:"/settings/company/emails/custom-email",SETTINGS_COMPANY_LANGUAGES:"/settings/company/languages",SETTINGS_COMPANY_LANGUAGES_GROUP:"/settings/company/languages/[language]/[group]",SETTINGS_COMPANY_CUSTOM_DOMAINS:"/settings/company/custom-domains",SETTINGS_COMPANY_PRIORITIZATION:"/settings/company/prioritization",SETTINGS_COMPANY_THEME:"/settings/company/theme",SETTINGS_COMPANY_WIDGET_LEGACY:"/settings/company/widget/legacy",SETTINGS_COMPANY_PRIVACY:"/settings/company/privacy",SETTINGS_COMPANY_WHITE_LABEL:"/settings/company/white-label",SETTINGS_COMPANY_WEBHOOKS:"/settings/company/webhooks",SETTINGS_COMPANY_API:"/settings/company/api",SETTINGS_COMPANY_INTEGRATIONS:"/settings/company/integrations",SETTINGS_COMPANY_INTEGRATIONS_SLACK:"/settings/company/integrations/slack",SETTINGS_COMPANY_INTEGRATIONS_TRELLO:"/settings/company/integrations/trello",SETTINGS_COMPANY_INTEGRATIONS_JIRA:"/settings/company/integrations/jira",SETTINGS_COMPANY_INTEGRATIONS_OKTA:"/settings/company/integrations/okta",SETTINGS_COMPANY_INTEGRATIONS_PABBLY:"/settings/company/integrations/pabbly",SETTINGS_COMPANY_INTEGRATIONS_INTEGRATELY:"/settings/company/integrations/integrately",SETTINGS_COMPANY_INTEGRATIONS_LINEAR:"/settings/company/integrations/linear",SETTINGS_COMPANY_INTEGRATIONS_ZAPIER:"/settings/company/integrations/zapier",SETTINGS_COMPANY_INTEGRATIONS_ZENDESK:"/settings/company/integrations/zendesk",SETTINGS_COMPANY_INTEGRATIONS_INTERCOM:"/settings/company/integrations/intercom",SETTINGS_COMPANY_INTEGRATIONS_HELPSCOUT:"/settings/company/integrations/helpscout",SETTINGS_COMPANY_INTEGRATIONS_ENTRA:"/settings/company/integrations/microsoft-entra-id",SETTINGS_COMPANY_FRILL_SCRIPT:"/settings/company/frill-script",INTEGRATIONS_SLACK:"/integrations/slack",INTEGRATIONS_TRELLO:"/integrations/trello",INTEGRATIONS_JIRA:"/integrations/jira",INTEGRATIONS_ZENDESK:"/integrations/zendesk",INTEGRATIONS_INTERCOM:"/integrations/intercom",INTEGRATIONS_LINEAR:"/integrations/linear",REDIRECTS_SSO:"/redirects/sso"};var Nt="v2",b_=typeof window<"u"&&window.top!==window,Sr=3e3,Ri=`https://${yr}`,Ye=ne||Fi?"container.css":`${Ri}/${Nt}/container.css`,ma=`/${Nt}/survey`,ip=`${Ri}${ma}`,np=`https://localhost:${Sr}${ma}`,op=`https://localhost:${Sr}`,ha=ne?op:Fi?np:ip;var ga="Frill_Frame",ya="Frill_Frame",ba="Frill_Styles",Sa=`/${Nt}/app`,sp=`${Ri}${Sa}`,ap=`https://localhost:${Sr}${Sa}`,lp=`https://localhost:${Sr}`,_r=ne?lp:Fi?ap:sp;var Rt="data-frill-widget";var de="data-frill-widget-loaded",vr="Frill_Frame",_a="Frill_Frame",xr="Frill_Styles",Ci="Frill_Badge",me="Frill_Notification",Ve="Frill_Trigger",oe="Frill_Trigger--unread",He="Frill_View",q={HOME:"/",ANNOUNCEMENTS:"/announcements",VIEW_ANNOUNCEMENT:"/announcements/[announcementSlug]",ANNOUNCEMENTS_IDEA:"/announcements/idea/[ideaSlug]",ROADMAP:"/roadmap",ROADMAP_IDEA:"/roadmap/[ideaSlug]",IDEAS:"/ideas",IDEA_IDEA:"/ideas/[ideaSlug]",IDEAS_CREATE_IDEA:"/ideas/idea/new",CREATE_IDEA:"/create-idea",VIEW_IDEA:"/create-idea/[ideaSlug]",TERMS_OF_SERVICE:"/terms-of-service",PRIVACY_POLICY:"/privacy-policy"},va="frill-widget",he={LAUNCHER_OPEN:"Open Feedback Widget",LAUNCHER_CLOSE:"Close Feedback Widget"},S_=P("PUBLIC_API_BASE_URI",`https://api.${Dt}`);var Pi="/api",je={WIDGET_SETTINGS:"/v2/[key]/settings/",SURVEY_SETTINGS:"/v2/surveys/[key]",IDENTIFY:"/v2/container/[key]/identify",CONTAINER_SETTINGS:"/v2/container/[key]",UPDATE_USER_META:"/v2/auth/user-meta",ANNOUNCEMENTS:"/v2/[key]/announcements/",ROADMAP:"/v2/[key]/roadmap/",IDEAS:"/v2/[key]/ideas/"},xa=`https://${yr}`;var __=[{value:"usd",label:"USD"},{value:"aud",label:"AUD"}];var cp=[K.SIGNUP,K.LOGIN,K.LOGIN_SSO,K.LOGIN_ONE_TIME_CODE,K.FORGOT_PASSWORD,K.RESET_PASSWORD],up=[...cp,K.TERMS_OF_SERVICE,K.PRIVACY_POLICY,K.SETTINGS_UNSUBSCRIBE],E_=[...up,K.SETTINGS_COMPANY_BILLING,K.SETTINGS_COMPANY_UPGRADE,K.SETTINGS_NOTIFICATIONS,K.SETTINGS_PROFILE,K.SETTINGS_UNSUBSCRIBE];function fp(t){return Array.isArray(t)?t.join(","):t?t.toString():""}function qe(t=""){return(0,wr.parse)(t.replace("?",""))}function ve(t={}){return(0,wr.stringify)(Object.entries(t).reduce((e,[r,i])=>(typeof i<"u"&&i!==null&&(e[r]=i),e),{}))}function xe(t,e={}){return Object.keys(e).reduce((r,i)=>{let n=fp(e[i]);return r.replace(`[${i}]`,n||"").replace(`[[...${i}]]`,n||"")},t)}function we(t,e={}){let r=ve(e),i=t.includes("?")?"&":"?";return r?`${t}${i}${r}`:t}function wa(t){if(!t)return!1;let e=/^(?:\w+:)?\/\/(\S+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,i=/^[^\s\.]+\.\S{2,}$/,n=t.match(e);if(!n)return!1;let s=n[1];return s?!!(r.test(s)||i.test(s)):!1}var Ct=console,Li={timestamp:"gray",disable:"gray",default:"gray",debug:"gray",log:"inherit",info:"inherit",warn:"#F1B109",error:"#F20404"},ze={debug:0,log:1,info:2,warn:3,error:4,disable:5};function Ea(){if(!Di)return ze.debug;if($)return ze.disable;let{logLevel:t}=qe(window.location.search.replace("?",""));return ze[typeof t=="string"?t:"disable"]??ze.disable}function Ta(t){return[`color: ${Li.default}; font-weight: lighter;`,`color: ${Li[t]}; font-weight: bold;`,`color: ${Li.timestamp}; font-weight: lighter;`]}function Ia(t,e){let r=hr(new Date,"logger");return`%c ${t} %c${e} %c@ ${r}`}function pp(t=[]){let e,r={};t.forEach((i,n)=>{i&&i.stack&&typeof i.message=="string"?e=i:r[`context-${n}`]=i})}var Mi=class{constructor(e,r){this.type=e;this._level=Ea();this.debug=(...e)=>{this.console("debug",this.type,...e)};this.log=(...e)=>{this.console("log",this.type,...e)};this.info=(...e)=>{this.console("info",this.type,...e)};this.error=(...e)=>{this.console("error",this.type,...e),pp(e)};this.warn=(...e)=>{this.console("warn",this.type,...e)};r&&(this.level=r)}set level(e){this._level=ze[e]??Ea()}console(e,r,...i){if(this._level>ze[e]||$)return;let[n,...s]=i,a=e==="log"||e==="debug"||e==="info";if(a&&(!s||s.length===0)&&typeof n=="string"){Ct[e](Ia(r,n),...Ta(e));return}let l=a&&typeof n=="string",u=Ia(r,l?n:e);Ct.groupCollapsed(u,...Ta(e)),l||Ct[e](n),typeof s<"u"&&s.length>0&&Ct[e](...s),Ct.groupEnd()}};function se(t,e){return new Mi(t,e)}var F_=se("common");var Er=class{constructor(e,r,i){this.key=e;this.name=r;this.actions=i;this.i=0;this.promises=new Map;this.logger=se(this.name);this.messenger={send:e=>{parent.postMessage(e,"*")},on:e=>{$||window.addEventListener("message",e,!1)},off:e=>{$||window.removeEventListener("message",e,!1)}};this.client=new Proxy({},{get:(e,r)=>(...i)=>this.request({name:r,params:i})});this.destroy=()=>{this.messenger.off(this.handleMessage)};this.handleMessage=e=>{if(!(e?.data?.type!=="FRILL"||e?.data?.sender===this.name||e?.data?.key!==this.key)){if(this.logger.debug("receive",e),"requestId"in e.data){let{requestId:r,payload:i}=e.data;if(this.promises.has(r)){let[n,s]=this.promises.get(r);i&&"__error"in i?s(new Error(i.__error)):n(i)}return}this.run(e.data)}}}setup(){this.logger.debug("listen"),this.messenger.on(this.handleMessage)}async request(e){return new Promise((r,i)=>{let n=this.send(e);this.promises.set(n.id,[r,i])})}send(e){if(!this.messenger)return;let r={type:"FRILL",key:this.key,sender:this.name,id:this.i++,message:e};return this.messenger.send(r),this.logger.debug("send",r),r}respond(e,r){if(!this.messenger)return;let i={type:"FRILL",key:this.key,sender:this.name,id:this.i++,payload:r,requestId:e.id};return this.messenger.send(i),this.logger.debug("respond",i),i}async run(e){let{name:r,params:i}=e.message;try{if(r in this.actions){let n=await this.actions[r](...i);this.respond(e,n);return}}catch(n){this.respond(e,{__error:n.message});return}this.respond(e,{__error:`Unsupported action ${r.toString()}`})}};var Ee=class extends Er{constructor(){super(...arguments);this._isReady=!1;this._queue=[];this.ready=()=>{this._isReady=!0};this.flush=()=>{let r=this._queue.pop();for(;r;)this.messenger.send(r),r=this._queue.pop()};this.messenger={send:r=>{let i="requestId"in r;if(!this._isReady&&!i){this._queue.push(r);return}this._frame?.contentWindow&&this._frame.contentWindow.postMessage(r,"*")},on:r=>{window.addEventListener("message",r,!1)},off:r=>{window.removeEventListener("message",r,!1)}}}set frame(r){this._frame=r}},Tr=class extends Ee{};o();o();o();o();o();function Pt(t=""){return t?.startsWith("eyJ")}function Oa(t,e){if(e.where.type==="all")return!0;let{shouldShow:r}=dp(t,e);return r}function dp(t,e){let r=e.where.urls;if(!r.length)return{shouldShow:!0,result:[]};let i=r.map(({url:a,match:l})=>({url:a.replace(/^https?:\/\//,"").trim(),match:l})).filter(({url:a})=>a).sort((a,l)=>{let u=Aa(a.url),p=a.url.split("*").length-1,d=Aa(l.url),g=l.url.split("*").length-1;if(p!==g){if(!g)return-1;if(!p)return 1}return u-d}),n=i.every(({match:a})=>a==="hide"),s=[];for(let{url:a,match:l}of i){let u=ki(t,a);s.push({url:a,matches:u,match:l}),u&&(n=l==="show")}return{result:s,shouldShow:n}}function ki(t,e){let i=hp(e).replace(/\\\*/gi,".*").replace(/^https?:\/\//,""),n=e.includes(".")||e.includes("*"),s=new RegExp(`${n?"^":""}${i}/?${n?"$":""}`,"ig");try{return!!mp(t).match(s)}catch{return!1}}function mp(t){return t.replace(/^https?:\/\//,"").replace(/\/$/,"")+"/"}function hp(t){return t.replace(/[.?*+\\|{()[^$]/g,"\\$&")}function Aa(t){let[e,...r]=t.split("/");return e.split(".").length+r.length}function Lt(t){return!!(t&&"email"in t&&!Wi(t))}function Wi(t){return!!(t&&"frillToken"in t)}function Da(t){return!!(t&&"ssoToken"in t&&Pt(t.ssoToken))}o();o();var L=Zt(Ca());o();o();o();function Qe(t){return t==="__proto__"}o();function Pa(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}o();function Ze(t){return typeof t=="string"||typeof t=="symbol"?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}o();o();function Ui(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map(Ui).join(",");let e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function Ir(t){if(Array.isArray(t))return t.map(Ze);if(typeof t=="symbol")return[t];t=Ui(t);let e=[],r=t.length;if(r===0)return e;let i=0,n="",s="",a=!1;for(t.charCodeAt(0)===46&&(e.push(""),i++);i<r;){let l=t[i];s?l==="\\"&&i+1<r?(i++,n+=t[i]):l===s?s="":n+=l:a?l==='"'||l==="'"?s=l:l==="]"?(a=!1,e.push(n),n=""):n+=l:l==="["?(a=!0,n&&(e.push(n),n="")):l==="."?n&&(e.push(n),n=""):n+=l,i++}return n&&e.push(n),e}function Te(t,e,r){if(t==null)return r;switch(typeof e){case"string":{if(Qe(e))return r;let i=t[e];return i===void 0?Pa(e)?Te(t,Ir(e),r):r:i}case"number":case"symbol":{typeof e=="number"&&(e=Ze(e));let i=t[e];return i===void 0?r:i}default:{if(Array.isArray(e))return Dp(t,e,r);if(Object.is(e?.valueOf(),-0)?e="-0":e=String(e),Qe(e))return r;let i=t[e];return i===void 0?r:i}}}function Dp(t,e,r){if(e.length===0)return r;let i=t;for(let n=0;n<e.length;n++){if(i==null||Qe(e[n]))return r;i=i[e[n]]}return i===void 0?r:i}o();function Ki(t){return t!==null&&(typeof t=="object"||typeof t=="function")}o();function La(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}o();var Fp=/^(?:0|[1-9]\d*)$/;function Ma(t,e=Number.MAX_SAFE_INTEGER){switch(typeof t){case"number":return Number.isInteger(t)&&t>=0&&t<e;case"symbol":return!1;case"string":return Fp.test(t)}}o();function ka(t){return typeof t=="symbol"||t instanceof Symbol}o();var Np=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rp=/^\w*$/;function Wa(t,e){return Array.isArray(t)?!1:typeof t=="number"||typeof t=="boolean"||t==null||ka(t)?!0:typeof t=="string"&&(Rp.test(t)||!Np.test(t))||e!=null&&Object.hasOwn(e,t)}o();var Ua=(t,e,r)=>{let i=t[e];(!(Object.hasOwn(t,e)&&La(i,r))||r===void 0&&!(e in t))&&(t[e]=r)};o();function Ka(t,e,r,i){if(t==null&&!Ki(t))return t;let n;Wa(e,t)?n=[e]:Array.isArray(e)?n=e:n=Ir(e);let s=r(Te(t,n)),a=t;for(let l=0;l<n.length&&a!=null;l++){let u=Ze(n[l]);if(Qe(u))continue;let p;if(l===n.length-1)p=s;else{let d=a[u],g=i?.(d,u,t);p=g!==void 0?g:Ki(d)?d:Ma(n[l+1])?[]:{}}Ua(a,u,p),a=a[u]}return t}o();o();function Ba(t,e,{signal:r,edges:i}={}){let n,s=null,a=i!=null&&i.includes("leading"),l=i==null||i.includes("trailing"),u=()=>{s!==null&&(t.apply(n,s),n=void 0,s=null)},p=()=>{l&&u(),b()},d=null,g=()=>{d!=null&&clearTimeout(d),d=setTimeout(()=>{d=null,p()},e)},m=()=>{d!==null&&(clearTimeout(d),d=null)},b=()=>{m(),n=void 0,s=null},S=()=>{u()},v=function(...x){if(r?.aborted)return;n=this,s=x;let w=d==null;g(),a&&w&&u()};return v.schedule=g,v.cancel=b,v.flush=S,r?.addEventListener("abort",b,{once:!0}),v}function Ga(t,e=0,r={}){typeof r!="object"&&(r={});let{leading:i=!1,trailing:n=!0,maxWait:s}=r,a=Array(2);i&&(a[0]="leading"),n&&(a[1]="trailing");let l,u=null,p=Ba(function(...m){l=t.apply(this,m),u=null},e,{edges:a}),d=function(...m){return s!=null&&(u===null&&(u=Date.now()),Date.now()-u>=s)?(l=t.apply(this,m),u=Date.now(),p.cancel(),p.schedule(),l):(p.apply(this,m),l)},g=()=>(p.flush(),l);return d.cancel=p.cancel,d.flush=g,d}o();function Ar(t,e=0,r={}){let{leading:i=!0,trailing:n=!0}=r;return Ga(t,e,{leading:i,maxWait:e,trailing:n})}o();function Or(t,e,r,i){let n;return typeof i=="function"?n=i:n=()=>{},Ka(t,e,()=>r,n)}var kt=Zt(Ya());function z(t){if(Array.isArray(t))return t.map(z);if(t&&typeof t=="object"){let e={};for(let[r,i]of Object.entries(t))e[r]=i&&typeof i=="object"?z(i):i;return e}return t}o();function Wt(t,e){let r=typeof e=="number"?e:e.length,[i,n]=typeof t=="string"?[t,`${t}s`]:t;return r===1?i:n}function Va(t){return t.length?`${t[0].toUpperCase()}${t.slice(1)}`:t}o();var Ha={popover:{type:"popover",offsetSkidding:0,offsetDistance:20,isFixedPosition:!0,placement:"top-end",width:"410px",height:"600px"},modal:{type:"modal",width:"640px",height:"500px"},sidebar:{type:"sidebar",position:"right",width:"450px"},embed:{type:"embed"}},Pp={where:{type:"all",urls:[]},when:{action:"enter",delay:0}},ja={floating:{type:"floating",color:"light",backgroundColor:pe,position:"bottom-right",icon:"bolt"},tab:{type:"tab",color:"light",backgroundColor:pe,position:"center-right",text:"What's new"},selector:{type:"selector",selector:""},null:{type:"null"}};function qa(t){return{sections:{order:["ideas","roadmap","announcements"],announcements:{active:!0,display:"embed",title:{[t]:"Announcements"},reactions:"inherit",comments:"inherit",disableAnnouncementLinks:!1,subscribeButton:"inherit",layout:"full",ideas:{open:"embed"}},ideas:{active:!0,activity:"inherit",display:"embed",title:{[t]:"Ideas"},sort:"trending",ideas:{open:"embed"},create:{label:{[t]:""},showButton:"on",hideSuggestions:!0}},roadmap:{active:!0,display:"embed",layout:"horizontal",title:{[t]:"Roadmap"},ideas:{open:"embed",excerpt:"inherit"}}},launcher:z(ja.tab),view:z(Ha.sidebar),targeting:z(Pp),badge:{type:"count"},advanced:{openLinksInNewWindow:!0,hidePoweredByFrill:!1},appearance:{responsiveMediaQuery:"(min-width: 481px)",showLogo:!0,theme:{idx:""},headerBackgroundColor:"#f9fafb",headerTextColor:"dark",title:{[t]:""},description:{[t]:"Suggest a feature, read through our Roadmap and check out our latest feature releases."}},navigation:{reopenOnStartPage:!1}}}var Lp={arrayMerge:(t,e)=>Array.from(new Set([...e,...t]))};function Dr(t,e,{mergeOptions:r=Lp,language:i}){let{advanced:n={},appearance:s={},badge:a={},launcher:l={},navigation:u={},sections:p={},targeting:d={},view:g={}}=e,m=t||qa(i),b=l?.type||m.launcher.type,S=g?.type||m.view.type,v=(0,L.default)(ja[b],m.launcher),x=(0,L.default)(Ha[S],m.view);return{advanced:(0,L.default)(m.advanced,n,r),appearance:(0,L.default)(m.appearance,s,r),badge:(0,L.default)(m.badge,a,r),launcher:(0,L.default)(v,l,r),navigation:(0,L.default)(m.navigation,Object.assign({},u),r),sections:(0,L.default)(m.sections,p,r),targeting:(0,L.default)(m.targeting,d,r),view:(0,L.default)(x,g,r)}}function Mp(t,e){return typeof t.sections.ideas.title=="string"&&(t.sections.ideas.title={[e]:t.sections.ideas.title}),(!t.sections.ideas.create?.label||typeof t.sections.ideas.create.label=="string")&&(t.sections.ideas.create.label={[e]:t.sections.ideas.create.label||""}),typeof t.sections.roadmap.title=="string"&&(t.sections.roadmap.title={[e]:t.sections.roadmap.title}),typeof t.sections.announcements.title=="string"&&(t.sections.announcements.title={[e]:t.sections.announcements.title}),typeof t.appearance.title=="string"&&(t.appearance.title={[e]:t.appearance.title}),typeof t.appearance.description=="string"&&(t.appearance.description={[e]:t.appearance.description}),t}function Bi(t,e){let r=qa(e);return r.sections=(0,L.default)(r.sections,{announcements:{reactions:"inherit",ideas:{open:"link"}}}),r.appearance.description={[e]:""},r.appearance.showLogo=!1,Dr(r,Mp(z(t),e),{language:e})}var ux=`(function(t,r){function s(){var a=r.getElementsByTagName("script")[0],e=r.createElement("script");e.type="text/javascript",e.async=!0,e.src="${da}",a.parentNode.insertBefore(e,a)}if(!t.Frill){var o=0,i={};t.Frill=function(e,p){var n,l=o++,c=new Promise(function(v,d){i[l]={params:[e,p],resolve:function(f){n=f,v(f)},reject:d}});return c.destroy=function(){delete i[l],n&&n.destroy()},c},t.Frill.q=i;}r.readyState==="complete"||r.readyState==="interactive"?s():r.addEventListener("DOMContentLoaded",s)})(window,document);`;function za(t){return`${va}:${Ni}:${t}`}var hx={"weeks-4":"(from prev 4 weeks)","month-to-date":"(from prev month)",all:""};var Xa=[{value:"enter",label:"When the user lands on the page"},{value:"exit",label:"When a user leaves the page"},{value:"api",label:"When I trigger it with code"},{value:"scroll",label:"When the user has scrolled the page (soon)",disabled:!0}];var kp={where:{type:"all",urls:[]},when:{action:"enter",delay:0},showAfter:{active:!1,value:7,unit:"day"}},Wp={afterResponse:{active:!1,value:7,unit:"day"},afterClose:{active:!1,value:7,unit:"day"},oncePerVisit:!0,preventSurveyAfterResponse:!1},Up={hideFromGuests:!1};function Qa(t,e){let r={audience:z(Up),frequency:z(Wp),targeting:z(kp),advanced:{openLinksInNewWindow:!0,hidePoweredByFrill:!1},appearance:{theme:{idx:""},accentColor:"",position:"bottom-left"}};switch(t){case"nps":return{...r,title:"How likely are you to recommend Frill?",translations:{[e]:{title:"How likely are you to recommend Frill?"}},feedbackForm:"optional"};case"csat":return{...r,title:"How happy are you with Frill?",translations:{[e]:{title:"How happy are you with Frill?"}},feedbackForm:"optional",rating:"custom"};case"idea-poll":return{...r,title:"What should we build next?",translations:{[e]:{title:"What should we build next?"}},showIdeaDescription:!0,showNoneOption:!0};case"open-feedback":return{...r,title:"How can we improve this?",translations:{[e]:{title:"How can we improve this?"}}};case"poll":return{...r,options:[{label:{[e]:"Lois Griffin"},value:1},{label:{[e]:"Peter Griffin"},value:2},{label:{[e]:"Stewie Griffin"},value:3},{label:{[e]:"Someone else"},value:4}],title:"Who is your favourite Family Guy character?",translations:{[e]:{title:"Who is your favourite Family Guy character?"}},feedbackForm:""}}}var Kp={arrayMerge:(t,e)=>Array.from(new Set([...e,...t]))};function Ut(t,e,r=Kp){let{advanced:i={},appearance:n={},audience:s={},frequency:a={},targeting:l={},translations:u={},...p}=e;return{...t,advanced:(0,L.default)(t.advanced,i,r),appearance:(0,L.default)(t.appearance,n,r),translations:(0,L.default)(t.translations||{},Object.assign({},u),r),audience:(0,L.default)(t.audience,s,r),frequency:(0,L.default)(t.frequency,a,r),targeting:(0,L.default)(t.targeting,l,r),...p}}var Ie=se("Frill","log");function M(...t){console.warn("%c Frill.co","font-weight: bold;",t.join(`

`),`

See our documentation for information: ${br.DEVELOPER_DOCS_FRILL_SCRIPT}`)}function Kt(t){return M(`Calling ${t} without first calling Frill('container', { key: 'YOUR-KEY-HERE' }) can lead to unexpected results with user identification.`,"If you want to load Widgets and Surveys manually, you should still load your container with autoLoad disabled, e.g. Frill('container', { autoLoad: false, key: 'YOUR-KEY-HERE' })")}var C=class extends Error{constructor(r,i=!0){super(r);this.warn=i;this.isKnown=!0}};function ae(t){return!!(t?.message&&t?.isKnown)}function Za(t,e){let r=t.targeting,i=[],n=r.where.type==="all"?"Show on all pages":"Show on some pages:";if(i.push(n),r.where.type==="selected"){let a=r.where.urls.map(({url:l,match:u})=>`  - ${Va(u)} on "${l}" ${ki(window.location.href,l)?"\u2705":"\u274C"}`);i.push(...a)}i.push("");let s=Xa.find(a=>a.value===r.when.action);if(i.push(s?.label||"Unknown show when trigger!"),t.type==="survey"&&e.identity?.userMeta){let a=t.entity.idx,l=e.identity.userMeta.sdk?.surveys?.[a];i.push(""),i.push(l?.lastInteraction?`${l.lastInteraction.type==="response"?"Responsed":"Dismissed"} ${gr(l.lastInteraction.date)} ago (session #${l.lastInteraction.session})`:"No interactions with survey")}return i.join(`
`)}function Ja(t){if(t)return`First identified ${gr(t.identifiedAt)} ago
Last identified ${gr(t.lastIdentifiedAt)} ago
${t.sessionCount} ${Wt("session",t.sessionCount)}`}o();var Bp=["en","zh","es","fr","de","ja","pt","ru","it","ko","ar","nl","tr","pl","sv","vi","th","he","id","da","no","fi","cs","el","hu","ro","sk","bg","uk","hi","ms","ta","bn","pa","ur","fa","tl","my","am","sw","km"];function el(t){return Bp.includes(t)}function Gp(t){if(t&&typeof t=="string"){let e=t.slice(0,2);return el(e)?e:void 0}}function tl(){if($)return;let{lang:t}=qe(window.location.search);return el(t)?t:Gp(navigator.language)}var Je=class{constructor(e,r){this.key=e;this.options=r;this.cache={};this.widget=async()=>{try{let{hostname:e}=window.location;return await this.get(we(je.WIDGET_SETTINGS,{host:e}),{authorize:!1})}catch{throw new C("Failed to load widget settings")}};this.survey=async()=>{try{let{hostname:e}=window.location;return await this.get(we(je.SURVEY_SETTINGS,{host:e}),{authorize:!1})}catch(e){throw ae(e)?e:new C("Failed to load survey settings")}};this.container=async()=>{try{let{hostname:e}=window.location;return await this.get(we(je.CONTAINER_SETTINGS,{host:e}),{authorize:!0})}catch{throw new C("Failed to load container (incorrect key)")}};this.identify=async e=>{try{let{hostname:r}=window.location,i={host:r};return Wi(e)&&(i.frillToken=e.frillRefreshToken),Da(e)&&(i.ssoToken=e.ssoToken),Lt(e)&&(i.email=e.email,i.name=e.name,e.attributes&&(i.attributes=JSON.stringify(e.attributes)),e.companies&&(i.companies=JSON.stringify(e.companies))),await this.get(we(je.IDENTIFY,i),{authorize:!1})}catch{throw new C("Failed to identify")}};this.meta=async e=>this.post(je.UPDATE_USER_META,e)}get base(){return xa}get authHeaders(){if(this.options.frill.identity?.tokens)return{Authorization:`Bearer ${this.options.frill.identity.tokens.frillToken}`,"Frill-Host":this.options.frill.identity.frillHost}}get language(){return this.options.language||tl()}async get(e,{authorize:r=!0}){let i=we(`${this.base}${Pi}${e}`.replace("[key]",this.key),{lang:this.language}),n=r?this.authHeaders:void 0,s=n?`${i}:${n.Authorization}`:i;if(!this.cache[s]){let a=await fetch(i,{headers:n});if(!a.ok){if(a.status===418){let u=await a.json();throw new C(u.message,!1)}throw new Error("Bad request")}let l=await a.json();if(this.isErrorResponse(l))throw new C(l.message||"Something went wrong");return this.cache[s]=l,l}return this.cache[s]}async post(e,r){let i=we(`${this.base}${Pi}${e}`.replace("[key]",this.key),{lang:this.language});return(await fetch(i,{body:JSON.stringify(r),method:"POST",headers:this.authHeaders})).json()}isErrorResponse(e){return e&&typeof e=="object"&&e.error===!0}};o();o();var Bt=class{constructor(){this.i=0;this.channels={};this.logger=se("events");this.log=!1;this.emit=(e,...r)=>{let i=this.channels[e],[n]=r;if(this.log&&this.logger.log("emit",e,n),!!i)for(let s of Array.from(i.values()))try{s(n)}catch(a){console.error(a)}}}on(e,r){let i=this.i++;this.channels[e]||(this.channels[e]=new Map);let n=this.channels[e];return n.set(i,r),()=>{n.delete(i)}}clear(){this.channels={}}};o();o();o();o();function Fr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}var $p={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Gi(t,e){function r(n,s,a){if(!(typeof document>"u")){a=Fr({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var u in a)a[u]&&(l+="; "+u,a[u]!==!0&&(l+="="+a[u].split(";")[0]));return document.cookie=n+"="+t.write(s,n)+l}}function i(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var s=document.cookie?document.cookie.split("; "):[],a={},l=0;l<s.length;l++){var u=s[l].split("="),p=u.slice(1).join("=");try{var d=decodeURIComponent(u[0]);if(a[d]=t.read(p,d),n===d)break}catch{}}return n?a[n]:a}}return Object.create({set:r,get:i,remove:function(n,s){r(n,"",Fr({},s,{expires:-1}))},withAttributes:function(n){return Gi(this.converter,Fr({},this.attributes,n))},withConverter:function(n){return Gi(Fr({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var $i=Gi($p,{path:"/"});var et=class{getItem(e){let r=window.localStorage.getItem(e);return r===null?void 0:r}setItem(e,r){return window.localStorage.setItem(e,r)}},Nr=class{constructor(){this.cache={}}getItem(e){return this.cache[e]}setItem(e,r){this.cache[e]=r}},Rr=class{getItem(e){}setItem(e,r){}},tt=class{getItem(e){return $i.get(e)}setItem(e,r){return $i.set(e,r,{domain:window.location.hostname,expires:60})}};var Yp="_storage_",Vp=300,Hp=$?Rr:et,Ae=class{constructor(e=Yp,r=new Hp){this._key=e;this.provider=r;this.data={};this.logger=se("storage");this.all=()=>this.data;this.get=(e,r=void 0)=>(this.logger.log("get",{path:e,defaultValue:r}),Te(this.data,e,r));this.set=(e,r,i=!1)=>{if(this.logger.log("set",{path:e,value:r}),Or(this.data,e,r,Object),i){this.write();return}this.queue||(this.queue=setTimeout(()=>{this.write()},Vp))};this.write=()=>{try{this.provider.setItem(this._key,JSON.stringify(this.data)),this.logger.log("writing",this.data)}catch(e){this.logger.warn("Storage error",e)}this.queue=void 0};this.remove=e=>{this.logger.log("remove",{path:e}),this.set(e,void 0)};this.clear=()=>{try{this.provider.setItem(this._key,"")}catch(e){this.logger.warn("Storage error",e)}};this.promise=this.init()}set key(e){this._key=e,this.init()}ready(){return this.promise}async init(){try{let e=await this.provider.getItem(this._key);e=e?JSON.parse(e):this.data,e&&(this.data=e)}catch(e){this.logger.warn("Storage error",e),this.clear()}this.data||(this.data={})}};var rt=class{constructor(e,r){this.frill=e;this.config=r;this.destroyed=!1;this.state={isOpen:!1,isLoading:!0};this.version=`${Nt}.${pa}`;this.events=new Bt;this.open=()=>{this.state.isOpen||(this.ipc.client.interaction({type:"open"}),this.events.emit("open",void 0))};this.close=()=>{this.state.isOpen&&(this.ipc.client.interaction({type:"close"}),this.events.emit("close",void 0))};this.toggle=e=>{if(e&&(e.__frillHandled=!0),this.state.isOpen){this.close();return}this.open()};this.destroy=()=>{this.destroyed=!0,this.ipc?.destroy(),this.events.emit("destroy",void 0)};this.onLogin=(e,r)=>{if(this.frill.identity?.tokens?.idx===e.idx)return;let i={user:e};this.events.emit("login",i);let n=Object.values(this.frill.containers)[0];n?n.storeUserTokens(r,this):Kt("Frill('survey') or Frill('widget')")};this.onLogout=()=>{if(!this.frill.identity)return;this.events.emit("logout",void 0);let e=Object.values(this.frill.containers)[0];e?e.storeUserTokens(null,this):Kt("Frill('survey') or Frill('widget')")};if(this.api=new Je(this.config.key,{frill:e,language:this.config.language}),this.store=new Ae(za(this.config.key),this.config.disableCookies?new Nr:new tt),r.callbacks)for(let[i,n]of Object.entries(r.callbacks)){let s=i.replace(/^on([A-Z])/,(a,l)=>l.toLowerCase());this.events.on(s,n)}}get id(){return this.config.id||this.config.key}identify(e){this.ipc.client.identify(e)}unidentify(){this.ipc.client.unidentify()}update(){}};o();function it(t){let e=document.createElement("iframe");e.tabIndex=0,e.setAttribute("sandbox","allow-same-origin allow-scripts allow-top-navigation allow-popups allow-forms allow-presentation allow-popups-to-escape-sandbox"),e.setAttribute("aria-hidden","false"),e.style.border="0",e.style.outline="0",e.style.width="100%",e.style.height="100%";for(let[r,i]of Object.entries(t))e[r]=i;return e}function Cr(t){let e=document.createElement("strong");return e.className="Frill_Notification__Badge",e.innerText=t.label,e.style.color=t.color,e}function Pr(t={}){let e=document.createElement("button");e.type="button",e.className="Frill_Notification__Close",e.innerHTML='<svg fill="none" viewBox="0 0 9 9" xmlns="http://www.w3.org/2000/svg"><g opacity=".5" stroke="#73737d" stroke-linecap="round" stroke-width="2"><path d="m8 1-7 7"/><path d="m8 8-7-7"/></g></svg>';for(let[r,i]of Object.entries(t))e[r]=i;return e}function Lr(t,e,r){let{company:i}=t.getConfig(),n=document.createElement("button");n.type="button",n.innerText=e.button.label||i.language?.["announcement-view"]||"View Announcement",n.className="Frill_Notification__Button",n.style.backgroundColor=e.button.backgroundColor||"#1675f0";let s=e.button.backgroundColor?e.button.color:"light";return n.style.color=s==="light"?"#fff":"#000",n.addEventListener("click",a=>{a.stopPropagation(),e.button.action==="widget"&&(t.viewAnnouncement(e.announcementSlug),t.open()),r()}),n}o();var il=1e3*60*60,nl=il*24,jp=nl*30.437,rl={hour:il,day:nl,month:jp,session:1/0};function qp(t,e){return t.history.some(r=>r.type==="survey-open"&&r.id===e)}function zp(t,e){return t.history.some(r=>(r.type==="survey-submit"||r.type==="survey-dismiss")&&r.id===e)}function Xp(t){return t.history.some(e=>e.type==="survey-submit"||e.type==="survey-dismiss")}function Gt(t){return Object.values(t.surveys).filter(e=>e.state.isOpen).length>0}function Mr(t,e){if(Gt(t))return!1;let{surveyIdx:r,settings:i,data:n,identity:s,isManual:a}=e,{afterClose:l,afterResponse:u,oncePerVisit:p=!0,preventSurveyAfterResponse:d=!1,ignoreRulesWhenCodeTriggered:g=!1}=i.frequency,{showAfter:m}=i.targeting;if(g&&a)return!0;if(i.audience?.hideFromGuests&&(!s?.tokens||!s?.tokens.email)||p&&qp(t,r)||zp(t,r)||d&&Xp(t))return!1;let{surveys:b,identifiedAt:S,sessionCount:v}=n,{lastInteraction:x}=b?.[r]||{};if(!x){if(m.active&&m.value>0){if(m.unit==="session")return v>=m.value;if(S){let y=It(S),_=Date.now(),E=m.value*rl[m.unit];return _>=y.getTime()+E}}return!0}let w=x.type==="dismiss"?l:u;if(!w.active||w.value<1)return!1;if(w.unit==="session")return v-(x.session||0)>=w.value;let O=It(x.date),f=Date.now(),h=w.value*rl[w.unit];return f>=O.getTime()+h}function kr(t,e,r){let i=Ut(Qa(t.type,r),t.settings);return e?Ut(i,e):i}var nt=class extends rt{constructor(r,i,n){super(r,i);this.frill=r;this.config=i;this.targeter=n;this.classNames={default:"Frill_Survey",loading:"Frill_Survey--loading",open:"Frill_Survey--open",enter:"Frill_Survey--enter"};this.state={isOpen:!1,isLoading:!0,width:0,height:0};this.open=()=>{if(!this.state.isOpen){if(!this.frame)return this.create();this.frill.history.push({type:"survey-open",id:this.survey.idx}),this.ipc.client.interaction({type:"open"}),this.state.isOpen=!0,this.update(),this.frame.focus(),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30),this.events.emit("open",void 0)}};this.close=()=>{this.state.isOpen&&(this.element.classList.remove(this.classNames.open),this.ipc.client.interaction({type:"close"}),this.state.isOpen=!1,this.update(),this.frame&&document.activeElement===this.frame&&this.frame.blur(),this.events.emit("close",void 0))};this.destroy=()=>{this.destroyed=!0,this.ipc?.destroy(),this.style?.parentNode?.removeChild(this.style),this.element?.parentNode?.removeChild(this.element),this.frame=void 0,this.style=void 0,delete this.frill.surveys?.[this.id],this.events.emit("destroy",void 0)};this.updateSettings=(r,i=!1)=>{if(!this.settings)return;let n=this.settings.appearance.position;r.settings&&(this.settings=i?r.settings:Ut(this.settings,r.settings)),r.type&&(this.type=r.type),this.ipc.client.updateSettings({type:this.type,settings:this.settings,language:r.language}),this.settings.appearance.position!==n&&(this.element.classList.remove(`${this.classNames.default}--${n}`),this.element.classList.add(`${this.classNames.default}--${this.settings.appearance.position}`))};this.update=()=>{if(!this.element)return;let{width:r,height:i}=this.state;this.element.style.width=r+"px",this.element.style.height=i+"px"};this.getConfig=()=>({href:window.location.href,company:this.company,settings:this.settings,storage:this.store.all(),survey:this.survey});this.onAppReady=()=>{if(this.state.isLoading){if(this.state.isLoading=!1,this.update(),this.ipc.ready(),this.ipc.flush(),this.events.emit("ready",this),this.config.previewMode||this.config.force){this.open();return}Gt(this.frill)||this.open()}};this.onSubmit=r=>{this.frill.history.push({type:"survey-submit",id:this.survey.idx}),this.events.emit("submit",r)};this.dismiss=()=>{this.frill.history.push({type:"survey-dismiss",id:this.survey.idx}),this.config.previewMode||this.destroy()};this.resize=({width:r,height:i})=>{this.state.width=r,this.state.height=i,this.update()};if(!i.key){M("Your Frill Survey has failed to load. Please check your code snippet is correct.","Reason: Missing survey key");return}this.frill.surveys[this.id]=this,this.parent=this.config.container||document.body,this.ipc=new Ee(i.key,"frame",{ready:this.onAppReady,close:this.close,destroy:this.destroy,dismiss:this.dismiss,getConfig:this.getConfig,onLogin:this.onLogin,onLogout:this.onLogout,onSubmit:this.onSubmit,open:this.open,resize:this.resize,setStorage:this.store.set}),this.ipc.setup(),this.setup=this.create().catch(s=>{ne&&console.error(s),!(ae(s)&&!s.warn)&&M("Your Frill Survey has failed to load. Please check your code snippet is correct.",`Reason: ${ae(s)?s.message:"Unexpected error"}
Survey key: ${this.config?.key||"Missing key!"}`)})}ready(){return this.setup}async create(){if(this.settings||this.frame)return;let{key:r,loadStyles:i=!0,frillTokens:n,language:s,ssoToken:a,settings:l,__survey:u}=this.config,{company:p,survey:d}=u||await this.api.survey();if(this.destroyed)return;if(!d)throw new C("Survey not found");this.company=p,this.survey={idx:d.idx,type:d.type},this.settings=kr(d,l,p.default_language),this.type=d.type;let g=this.settings.appearance.theme.idx||p.theme?.idx||"light";if(!this.targeter&&!this.config.previewMode&&!this.config.force){let b=this.frill.identity||null,S=b?.userMeta.sdk||{};if(!Mr(this.frill,{surveyIdx:d.idx,settings:this.settings,data:S,identity:b,isManual:!0})){this.events.emit("ready",this);return}}i&&(this.style=document.createElement("link"),this.style.id=`${ba}_${this.id}`,this.style.rel="stylesheet",this.style.href=Ye,this.parent.prepend(this.style));let m={key:r};if(this.frill.identity){let{tokens:b,userMeta:S}=this.frill.identity;b&&(m.frillToken=b.frillToken,m.frillRefreshToken=b.frillRefreshToken,m.isAnonymous=b.email?void 0:"1");let v=S.sdk;m.meta=JSON.stringify({sessionCount:v.sessionCount})}n?(m.frillToken=n.frillToken,m.frillRefreshToken=n.frillRefreshToken,m.isAnonymous=n.email?void 0:"1"):a&&(m.ssoToken=a),s&&(m.lang=s),this.config.user&&(m.user=JSON.stringify(this.config.user)),this.config.disableAnalytics&&(m.analytics="0"),this.config.disableCookies&&(m.cookies="0"),this.config.previewMode&&(m.preview="1"),this.frame=it({id:`${ga}_${this.id}`,className:ya,src:`${ha}/?${ve(m)}`}),this.ipc.frame=this.frame,this.element=document.createElement("div"),this.element.setAttribute("role","dialog"),this.element.classList.add(this.classNames.default,`${this.classNames.default}--${this.settings.appearance.position}`,`${this.classNames.default}--${g}`),this.element.appendChild(this.frame),this.parent.appendChild(this.element)}};o();o();o();var $t=class{constructor(){this.css="";this.type="null"}get element(){return null}setup(){}addBadge(e){}destroy(){}update(){}};o();var ol={announcement:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g stroke="currentColor" stroke-width="1.5"><path d="m4.45833 8.37499h3.88889c5.34718-.4861 9.23608-2.91666 9.23608-3.40276 0-.48612.4861-.97223 1.4584-.97223.7778 0 1.2963.64814 1.4583.97223v12.63887c0 .4861-.2917 1.4584-1.4583 1.4584-1.1667 0-1.2963-.9723-1.4584-1.4584-4.375-1.9445-7.6157-2.5926-9.23608-2.9166h-3.88889c-.97221 0-1.45833-1.0695-1.45833-3.4029 0-2.33327.48612-2.91661 1.45833-2.91661z"/><path d="m8.34732 8.37476v6.31944"/><path d="m17.5834 4.97223v12.63887"/><path d="m5.43057 14.6945 2.43055 5.3472c.16204.3241.77778.8751 1.94445.4862.80213-.2674.48613-.9723.48613-1.4584l-.48613-3.8889"/></g></svg>',roadmap:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m9 4.75c-.13511 0-.26187.03573-.37136.09825l-5.48778 2.99333c-.24094.13142-.39086.38396-.39086.65842v10.5c0 .255.12956.4925.34396.6306.2144.138.48425.1577.71639.0522l5.17427-2.352 5.67998 2.84c.2196.1098.479.1052.6945-.0124l5.5-3c.241-.1314.3909-.3839.3909-.6584v-10.5c0-.24466-.1193-.47394-.3197-.6143s-.4567-.17416-.6866-.09054l-5.2252 1.90006-5.71454-2.38107c-.09291-.04124-.19576-.06415-.30396-.06415zm-4.75 4.19523 4-2.18182v9.25369l-4 1.8181zm10 9.34127-4.5-2.25v-9.4115l4.5 1.875zm1.5-.0499 4-2.1818v-8.98402l-4 1.45454z" fill="currentColor" fillRule="evenodd"/></svg>',bolt:'<svg fill="none" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="m6.98592 18.5024h7.60558l-4.014 10.8001c-.5212 1.4026.9155 2.132 1.845.9959l12.2254-15.1623c.2394-.2946.3521-.5611.3521-.8696 0-.519-.3944-.9117-.9718-.9117h-7.6057l4.0141-10.80017c.5211-1.40262-.9296-2.131982-1.8451-.99586l-12.2253 15.16233c-.23944.2945-.3662.561-.3662.8696 0 .5189.40845.9117.98592.9117z" fill="currentColor"/></svg>',idea:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m7.36573 18.0735-1.43908-1.4391 7.32345-7.32349 1.4391 1.43909zm8.90197-6.7807c.0042-.004.0085-.0082.0127-.0123.0041-.0042.0083-.0085.0123-.0127l2.9292-2.92919c.537-.53697.537-1.40757 0-1.94454l-1.6158-1.61585c-.537-.53697-1.4076-.53697-1.9446 0l-2.9302 2.93022c-.0039.00373-.0078.00752-.0116.01136s-.0076.00771-.0114.01161l-7.93069 7.93069c-.53697.537-.53697 1.4076 0 1.9446l1.61585 1.6158c.53697.537 1.40757.537 1.94454 0zm-1.9569-3.04255 2.323-2.32299 1.4391 1.43908-2.323 2.32299zm-6.06077-3.62512c.27614 0 .5.22386.5.5v1.375h1.37497c.2762 0 .5.22386.5.5s-.2238.5-.5.5h-1.37497v1.375c0 .27614-.22386.5-.5.5s-.5-.22386-.5-.5v-1.375h-1.375c-.27614 0-.5-.22386-.5-.5s.22386-.5.5-.5h1.375v-1.375c0-.27614.22386-.5.5-.5zm11.12497 7.37497c0-.2761-.2238-.5-.5-.5-.2761 0-.5.2239-.5.5v1.375h-1.375c-.2761 0-.5.2239-.5.5 0 .2762.2239.5.5.5h1.375v1.375c0 .2762.2239.5.5.5.2762 0 .5-.2238.5-.5v-1.375h1.375c.2762 0 .5-.2238.5-.5 0-.2761-.2238-.5-.5-.5h-1.375zm-4.25 3.875c.2762 0 .5.2239.5.5v.75h.75c.2762 0 .5.2239.5.5 0 .2762-.2238.5-.5.5h-.75v.75c0 .2762-.2238.5-.5.5-.2761 0-.5-.2238-.5-.5v-.75h-.75c-.2761 0-.5-.2238-.5-.5 0-.2761.2239-.5.5-.5h.75v-.75c0-.2761.2239-.5.5-.5z" fill="currentColor" fillRule="evenodd"/></svg>',intercom:'<svg viewBox="0 0 28 32"><path fill="currentColor" d="M28,32 C28,32 23.2863266,30.1450667 19.4727818,28.6592 L3.43749107,28.6592 C1.53921989,28.6592 0,27.0272 0,25.0144 L0,3.6448 C0,1.632 1.53921989,0 3.43749107,0 L24.5615088,0 C26.45978,0 27.9989999,1.632 27.9989999,3.6448 L27.9989999,22.0490667 L28,22.0490667 L28,32 Z M23.8614088,20.0181333 C23.5309223,19.6105242 22.9540812,19.5633836 22.5692242,19.9125333 C22.5392199,19.9392 19.5537934,22.5941333 13.9989999,22.5941333 C8.51321617,22.5941333 5.48178311,19.9584 5.4277754,19.9104 C5.04295119,19.5629428 4.46760991,19.6105095 4.13759108,20.0170667 C3.97913051,20.2124916 3.9004494,20.4673395 3.91904357,20.7249415 C3.93763774,20.9825435 4.05196575,21.2215447 4.23660523,21.3888 C4.37862552,21.5168 7.77411059,24.5386667 13.9989999,24.5386667 C20.2248893,24.5386667 23.6203743,21.5168 23.7623946,21.3888 C23.9467342,21.2215726 24.0608642,20.9827905 24.0794539,20.7254507 C24.0980436,20.4681109 24.0195551,20.2135019 23.8614088,20.0181333 Z"></path></svg>'},Wr=class{constructor(e,r){this.widget=e;this.options=r;this.type="floating";this.classNames={default:"Frill_Trigger_Floating"}}setup(){let{backgroundColor:e=pe,color:r="light",icon:i="bolt",position:n="bottom-right"}=this.options;this.element=document.createElement("button"),this.element.type="button",this.element.classList.add(Ve,this.classNames.default,`${this.classNames.default}--${n}`),this.element.style.color=r==="dark"?"#202020":"#fff",this.element.style.backgroundColor=e||pe,this.element.innerHTML=i in ol?ol[i]:"",this.element.setAttribute("aria-label",he.LAUNCHER_OPEN),this.widget.parent.appendChild(this.element),this.element.addEventListener("click",this.widget.toggle),this.element.addEventListener("mouseenter",this.widget.interaction)}addBadge(e){this.element.appendChild(e)}destroy(){this.element&&(this.element.removeEventListener("click",this.widget.toggle),this.element.removeEventListener("mouseenter",this.widget.interaction),this.element.parentNode?.removeChild(this.element))}update(){if(!this.element)return;let{isOpen:e,unreadCount:r}=this.widget.state;r?this.element.classList.add(oe):this.element.classList.remove(oe),this.element.setAttribute("aria-label",e?he.LAUNCHER_CLOSE:he.LAUNCHER_OPEN)}};o();o();o();var ot=class{constructor(e={}){this.options=e;this.observer=null;this.callbacks={};this.i=0;this.emit=Ar(()=>{for(let e of Object.values(this.callbacks))e()},this.options.wait??100);this.onMutation=(e,r)=>{for(let i of e)if(i.type==="childList"){let n=Array.from(i.addedNodes).filter(sl),s=Array.from(i.removedNodes).filter(sl);if(n.length||s.length){this.emit();break}}};"MutationObserver"in window&&(this.observer=new MutationObserver(this.onMutation),this.observer.observe(document.body,{childList:!0,subtree:!0}))}on(e){let r=this.i++;this.callbacks[r]=e}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.emit.cancel()}};function sl(t){return t instanceof HTMLElement}var Ur=class{constructor(e,r){this.widget=e;this.options=r;this.type="selector";this.classNames={default:"Frill_Trigger_Selector"};this.elements=[];this.attachSelectors=()=>{if(this.elements=this.elements.filter(r=>r.isConnected?!0:(r.removeEventListener("click",this.widget.toggle,!0),r.removeEventListener("mouseenter",this.widget.interaction,!0),!1)),this.elements.length&&!this.options.queryAll)return;let e=this.getElements();for(let r of e)this.elements.includes(r)||(this.elements.push(r),r.addEventListener("click",this.widget.toggle,!0),r.addEventListener("mouseenter",this.widget.interaction,!0),r.classList.add(Ve,this.classNames.default))}}get element(){return this.elements[0]}setup(){let{selector:e}=this.options;if(!e)throw new C('Missing required "CSS Selector".');this.observer=new ot({wait:300}),this.observer.on(this.attachSelectors),this.attachSelectors()}getElements(){let{selector:e,queryAll:r}=this.options;if(typeof e=="string"){if(r&&this.widget.settings.view.type!=="popover"){let n=Array.from(document.querySelectorAll(e));return n.length=Math.min(n.length,10),n}let i=document.querySelector(e);return i?[i]:[]}return[e]}addBadge(e){this.elements.forEach((r,i)=>{i>0&&(e=e.cloneNode(),this.widget.badges.push(e)),r.appendChild(e)})}destroy(){this.observer?.destroy(),this.observer=void 0;for(let e of this.elements){for(let r of this.widget.badges)e.contains(r)&&e.removeChild(r);e.removeEventListener("click",this.widget.toggle),e.removeEventListener("mouseenter",this.widget.interaction)}}update(){for(let e of this.elements){let{unreadCount:r}=this.widget.state;r?e.classList.add(oe):e.classList.remove(oe)}}};o();var Kr=class{constructor(e,r){this.widget=e;this.options=r;this.type="tab";this.classNames={default:"Frill_Trigger_Tab"}}setup(){let{color:e="light",text:r,backgroundColor:i,position:n="center-right"}=this.options;this.element=document.createElement("button"),this.element.type="button",this.element.classList.add(Ve,this.classNames.default,`${this.classNames.default}--${n}`),this.element.style.color=e==="light"?"#fff":"#202020",this.element.style.backgroundColor=i||pe,this.element.innerText=r||"What's new",this.element.setAttribute("aria-label",he.LAUNCHER_OPEN),this.widget.parent.appendChild(this.element),this.element.addEventListener("click",this.widget.toggle),this.element.addEventListener("mouseenter",this.widget.interaction)}addBadge(e){this.element.appendChild(e)}destroy(){this.element&&(this.element.removeEventListener("click",this.widget.toggle),this.element.removeEventListener("mouseenter",this.widget.interaction),this.element.parentNode?.removeChild(this.element))}update(){if(!this.element)return;let{isOpen:e,unreadCount:r}=this.widget.state;r?this.element.classList.add(oe):this.element.classList.remove(oe),this.element.setAttribute("aria-label",e?he.LAUNCHER_CLOSE:he.LAUNCHER_OPEN)}};function al(t){let e=t.settings.launcher;if(t.settings.view.type==="embed")return new $t;switch(e.type){case"floating":return new Wr(t,e);case"selector":return new Ur(t,e);case"tab":return new Kr(t,e);case"null":return new $t;default:throw new C("Invalid launcher option. Available options: `floating`, `selector` and `tray`")}}o();o();o();function ll(t){return!!(t&&t.length>3&&t.indexOf("@")>0)}function Qp(t){if(!t||typeof t!="object")return;let{name:e="Guest",email:r,avatar:i}=t;if(ll(r))return{name:e,email:r,avatar:wa(i)?i:void 0}}function cl(t){if(!t||typeof t!="object")return;let e=Qp(t);if(e)return e;if(t.frillToken)return{frillToken:t.frillToken,frillRefreshToken:t.frillRefreshToken,email:t.email};if(t.ssoToken)return{ssoToken:t.ssoToken}}function st(t){return!!(t&&"userMeta"in t&&t.userMeta)}function Zp(t){let e=[];return e.length&&M("Your Frill Widget configuration is using deprecated options that will eventually be removed. Please update your code to avoid unexpected changes.",e.join(""),`For more help please see ${br.WIDGET}`),{config:t,warnings:e}}function ul(t){return!!t.key}function fl(t){return Zp(t)}function pl(t){if(t.frillTokens)return t.frillTokens;if(t.ssoToken)return{ssoToken:t.ssoToken};if(t.user)return t.user}function Yi(t){let{sdk:e,...r}=t||{},{identifiedAt:i,sessionCount:n=0}=e||{},s=new Date().toISOString();return{...r,sdk:{...e,sessionCount:(n||0)+1,identifiedAt:i||s,lastIdentifiedAt:s}}}function Vi(t,e,r){return t.identity?.tokens&&(r==="widget"&&t.identity?.tokens&&t.identity.tokens.scope!=="basic"||r==="survey")?t.identity.tokens:st(e)?e.tokens:e}o();function Hi(t,e){try{let r=window.matchMedia(t),i=()=>{let n=!r.matches;e(n)};return i(),typeof r.addEventListener=="function"?r.addEventListener("change",i):r.addListener(i),()=>{typeof r.removeEventListener=="function"?r.removeEventListener("change",i):r.removeListener(i)}}catch(r){console.error(r)}}o();function dl(t,e){let{navigation:r,sections:i}=t,n=r.startPage||i.order.find(p=>{let d=i[p];return d.active&&d.display==="embed"}),{ideaSlug:s,announcementSlug:a,section:l}=e,u=l||n;if(s)switch(u){case"roadmap":return xe(q.ROADMAP_IDEA,{ideaSlug:s});case"create-idea":return xe(q.VIEW_IDEA,{ideaSlug:s});case"announcements":return xe(q.ANNOUNCEMENTS_IDEA,{ideaSlug:s});default:return xe(q.IDEA_IDEA,{ideaSlug:s})}if(a)return xe(q.VIEW_ANNOUNCEMENT,{announcementSlug:a});switch(u){case"announcements":return q.ANNOUNCEMENTS;case"ideas":return q.IDEAS;case"roadmap":return q.ROADMAP;case"create-idea":return q.CREATE_IDEA}}function ml(t){return xe(q.VIEW_ANNOUNCEMENT,{announcementSlug:t})}function hl(t){let e=t[Ft.IDEA],r=t[Ft.ANNOUNCEMENT],i=t[Ft.SECTION],n=t[Ft.OPEN];return{ideaSlug:typeof e=="string"&&e?e:void 0,announcementSlug:typeof r=="string"&&r?r:void 0,section:Jp(i)?i:void 0,open:!!n&&n!=="0"&&n!=="false"}}function Jp(t){return t==="ideas"||t==="roadmap"||t==="announcements"||t==="create-idea"}o();o();var Br=class{constructor(e,r){this.widget=e;this.options=r;this.type="embed"}setup(){let{parent:e,frame:r}=this.widget;e.appendChild(r)}destroy(){let{parent:e,frame:r}=this.widget;e.removeChild(r),e.removeAttribute(de)}update(){}};o();o();var at=new Set,ed=0,Gr=0,ji=0;function lt(){let t=ed++;function e(){at.has(t)||(at.size===0&&id(),at.add(t))}function r(){at.has(t)&&(at.delete(t),at.size===0&&nd())}return{on:e,off:r}}function td(){if(typeof Gr=="number")return Gr;let t=document.documentElement,e=document.createElement("div");return e.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),t.appendChild(e),Gr=e.offsetWidth-e.clientWidth,t.removeChild(e),Gr}function rd(){return document.documentElement.scrollHeight>window.innerHeight}function id(){if(typeof document>"u")return;let t=document.documentElement;ji=window.pageYOffset,t.style.width=rd()?`calc(100% - ${td()}px)`:"100%",t.style.position="fixed",t.style.top=`${-ji}px`,t.style.overflow="hidden"}function nd(){if(typeof document>"u")return;let t=document.documentElement;t.style.width="",t.style.position="",t.style.top="",t.style.overflow="",window.scroll(0,ji),window.dispatchEvent(new CustomEvent("scroll"))}var $r=class{constructor(e,r){this.widget=e;this.options=r;this.type="modal";this.classNames={default:"Frill_View_Modal",loading:"Frill_View_Modal--loading",mobile:"Frill_View_Modal--mobile",open:"Frill_View_Modal--open",enter:"Frill_View_Modal--enter",content:"Frill_View_Modal__Content",shadow:"Frill_View_Modal__Shadow"};this.lock=lt();this.onWidowClick=e=>{e.__frillHandled||this.element&&!this.content.contains(e.target)&&this.widget.close()}}get width(){return this.widget.state.isMobile?"100%":this.options.width?.replace("%","vw")||"640px"}get height(){return this.widget.state.isMobile?"100%":this.options.height?.replace("%","vh")||"500px"}setup(){let{frame:e}=this.widget;this.element=document.createElement("div"),this.element.setAttribute("role","dialog"),this.element.style.display="none",this.element.classList.add(He,this.classNames.default),this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.content.style.width=this.width,this.content.style.height=this.height,this.content.appendChild(e),this.shadow=document.createElement("div"),this.shadow.classList.add(this.classNames.shadow),this.element.appendChild(this.content),this.element.appendChild(this.shadow),this.widget.parent.appendChild(this.element)}destroy(){this.lock.off(),this.shadow?.removeEventListener("click",this.onWidowClick),this.element?.parentNode?.removeChild(this.element)}update(){if(!this.element)return;this.element.style.display="";let{isOpen:e,isLoading:r,isMobile:i}=this.widget.state;r?this.element.classList.add(this.classNames.loading):this.element.classList.remove(this.classNames.loading),i?this.element.classList.add(this.classNames.mobile):this.element.classList.remove(this.classNames.mobile),this.content.style.width=this.width,this.content.style.height=this.height;let n=this.element.classList.contains(this.classNames.open);e?n||(this.options.preventScroll&&this.lock.on(),this.shadow.addEventListener("click",this.onWidowClick),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30)):(this.element.classList.remove(this.classNames.open),this.shadow.removeEventListener("click",this.onWidowClick),this.lock.off())}};o();o();o();o();var ct=Math.min,le=Math.max,Vt=Math.round,Ht=Math.floor,X=t=>({x:t,y:t}),od={left:"right",right:"left",bottom:"top",top:"bottom"},sd={start:"end",end:"start"};function qi(t,e,r){return le(t,ct(e,r))}function jt(t,e){return typeof t=="function"?t(e):t}function ge(t){return t.split("-")[0]}function qt(t){return t.split("-")[1]}function zi(t){return t==="x"?"y":"x"}function Xi(t){return t==="y"?"height":"width"}var ad=new Set(["top","bottom"]);function ce(t){return ad.has(ge(t))?"y":"x"}function Qi(t){return zi(ce(t))}function bl(t,e,r){r===void 0&&(r=!1);let i=qt(t),n=Qi(t),s=Xi(n),a=n==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Yt(a)),[a,Yt(a)]}function Sl(t){let e=Yt(t);return[Yr(t),e,Yr(e)]}function Yr(t){return t.replace(/start|end/g,e=>sd[e])}var gl=["left","right"],yl=["right","left"],ld=["top","bottom"],cd=["bottom","top"];function ud(t,e,r){switch(t){case"top":case"bottom":return r?e?yl:gl:e?gl:yl;case"left":case"right":return e?ld:cd;default:return[]}}function _l(t,e,r,i){let n=qt(t),s=ud(ge(t),r==="start",i);return n&&(s=s.map(a=>a+"-"+n),e&&(s=s.concat(s.map(Yr)))),s}function Yt(t){return t.replace(/left|right|bottom|top/g,e=>od[e])}function fd(t){return{top:0,right:0,bottom:0,left:0,...t}}function vl(t){return typeof t!="number"?fd(t):{top:t,right:t,bottom:t,left:t}}function Oe(t){let{x:e,y:r,width:i,height:n}=t;return{width:i,height:n,top:r,left:e,right:e+i,bottom:r+n,x:e,y:r}}function xl(t,e,r){let{reference:i,floating:n}=t,s=ce(e),a=Qi(e),l=Xi(a),u=ge(e),p=s==="y",d=i.x+i.width/2-n.width/2,g=i.y+i.height/2-n.height/2,m=i[l]/2-n[l]/2,b;switch(u){case"top":b={x:d,y:i.y-n.height};break;case"bottom":b={x:d,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y:g};break;case"left":b={x:i.x-n.width,y:g};break;default:b={x:i.x,y:i.y}}switch(qt(e)){case"start":b[a]-=m*(r&&p?-1:1);break;case"end":b[a]+=m*(r&&p?-1:1);break}return b}var wl=async(t,e,r)=>{let{placement:i="bottom",strategy:n="absolute",middleware:s=[],platform:a}=r,l=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e)),p=await a.getElementRects({reference:t,floating:e,strategy:n}),{x:d,y:g}=xl(p,i,u),m=i,b={},S=0;for(let v=0;v<l.length;v++){let{name:x,fn:w}=l[v],{x:O,y:f,data:h,reset:y}=await w({x:d,y:g,initialPlacement:i,placement:m,strategy:n,middlewareData:b,rects:p,platform:a,elements:{reference:t,floating:e}});d=O??d,g=f??g,b={...b,[x]:{...b[x],...h}},y&&S<=50&&(S++,typeof y=="object"&&(y.placement&&(m=y.placement),y.rects&&(p=y.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:n}):y.rects),{x:d,y:g}=xl(p,m,u)),v=-1)}return{x:d,y:g,placement:m,strategy:n,middlewareData:b}};async function Zi(t,e){var r;e===void 0&&(e={});let{x:i,y:n,platform:s,rects:a,elements:l,strategy:u}=t,{boundary:p="clippingAncestors",rootBoundary:d="viewport",elementContext:g="floating",altBoundary:m=!1,padding:b=0}=jt(e,t),S=vl(b),x=l[m?g==="floating"?"reference":"floating":g],w=Oe(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(x)))==null||r?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:p,rootBoundary:d,strategy:u})),O=g==="floating"?{x:i,y:n,width:a.floating.width,height:a.floating.height}:a.reference,f=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),h=await(s.isElement==null?void 0:s.isElement(f))?await(s.getScale==null?void 0:s.getScale(f))||{x:1,y:1}:{x:1,y:1},y=Oe(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:O,offsetParent:f,strategy:u}):O);return{top:(w.top-y.top+S.top)/h.y,bottom:(y.bottom-w.bottom+S.bottom)/h.y,left:(w.left-y.left+S.left)/h.x,right:(y.right-w.right+S.right)/h.x}}var El=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,i;let{placement:n,middlewareData:s,rects:a,initialPlacement:l,platform:u,elements:p}=e,{mainAxis:d=!0,crossAxis:g=!0,fallbackPlacements:m,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:v=!0,...x}=jt(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};let w=ge(n),O=ce(l),f=ge(l)===l,h=await(u.isRTL==null?void 0:u.isRTL(p.floating)),y=m||(f||!v?[Yt(l)]:Sl(l)),_=S!=="none";!m&&_&&y.push(..._l(l,v,S,h));let E=[l,...y],R=await Zi(e,x),F=[],N=((i=s.flip)==null?void 0:i.overflows)||[];if(d&&F.push(R[w]),g){let J=bl(n,a,h);F.push(R[J[0]],R[J[1]])}if(N=[...N,{placement:n,overflows:F}],!F.every(J=>J<=0)){var B,H;let J=(((B=s.flip)==null?void 0:B.index)||0)+1,ri=E[J];if(ri&&(!(g==="alignment"?O!==ce(ri):!1)||N.every(j=>ce(j.placement)===O?j.overflows[0]>0:!0)))return{data:{index:J,overflows:N},reset:{placement:ri}};let ht=(H=N.filter(ye=>ye.overflows[0]<=0).sort((ye,j)=>ye.overflows[1]-j.overflows[1])[0])==null?void 0:H.placement;if(!ht)switch(b){case"bestFit":{var mt;let ye=(mt=N.filter(j=>{if(_){let fe=ce(j.placement);return fe===O||fe==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(fe=>fe>0).reduce((fe,rc)=>fe+rc,0)]).sort((j,fe)=>j[1]-fe[1])[0])==null?void 0:mt[0];ye&&(ht=ye);break}case"initialPlacement":ht=l;break}if(n!==ht)return{reset:{placement:ht}}}return{}}}};var pd=new Set(["left","top"]);async function dd(t,e){let{placement:r,platform:i,elements:n}=t,s=await(i.isRTL==null?void 0:i.isRTL(n.floating)),a=ge(r),l=qt(r),u=ce(r)==="y",p=pd.has(a)?-1:1,d=s&&u?-1:1,g=jt(e,t),{mainAxis:m,crossAxis:b,alignmentAxis:S}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof S=="number"&&(b=l==="end"?S*-1:S),u?{x:b*d,y:m*p}:{x:m*p,y:b*d}}var Tl=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,i;let{x:n,y:s,placement:a,middlewareData:l}=e,u=await dd(e,t);return a===((r=l.offset)==null?void 0:r.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:n+u.x,y:s+u.y,data:{...u,placement:a}}}}},Il=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:r,y:i,placement:n}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:w,y:O}=x;return{x:w,y:O}}},...u}=jt(t,e),p={x:r,y:i},d=await Zi(e,u),g=ce(ge(n)),m=zi(g),b=p[m],S=p[g];if(s){let x=m==="y"?"top":"left",w=m==="y"?"bottom":"right",O=b+d[x],f=b-d[w];b=qi(O,b,f)}if(a){let x=g==="y"?"top":"left",w=g==="y"?"bottom":"right",O=S+d[x],f=S-d[w];S=qi(O,S,f)}let v=l.fn({...e,[m]:b,[g]:S});return{...v,data:{x:v.x-r,y:v.y-i,enabled:{[m]:s,[g]:a}}}}}};o();function Vr(){return typeof window<"u"}function De(t){return Ol(t)?(t.nodeName||"").toLowerCase():"#document"}function G(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Q(t){var e;return(e=(Ol(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ol(t){return Vr()?t instanceof Node||t instanceof G(t).Node:!1}function Y(t){return Vr()?t instanceof Element||t instanceof G(t).Element:!1}function Z(t){return Vr()?t instanceof HTMLElement||t instanceof G(t).HTMLElement:!1}function Al(t){return!Vr()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof G(t).ShadowRoot}var md=new Set(["inline","contents"]);function ft(t){let{overflow:e,overflowX:r,overflowY:i,display:n}=V(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+r)&&!md.has(n)}var hd=new Set(["table","td","th"]);function Dl(t){return hd.has(De(t))}var gd=[":popover-open",":modal"];function zt(t){return gd.some(e=>{try{return t.matches(e)}catch{return!1}})}var yd=["transform","translate","scale","rotate","perspective"],bd=["transform","translate","scale","rotate","perspective","filter"],Sd=["paint","layout","strict","content"];function Hr(t){let e=jr(),r=Y(t)?V(t):t;return yd.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||bd.some(i=>(r.willChange||"").includes(i))||Sd.some(i=>(r.contain||"").includes(i))}function Fl(t){let e=ue(t);for(;Z(e)&&!Fe(e);){if(Hr(e))return e;if(zt(e))return null;e=ue(e)}return null}function jr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}var _d=new Set(["html","body","#document"]);function Fe(t){return _d.has(De(t))}function V(t){return G(t).getComputedStyle(t)}function Xt(t){return Y(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ue(t){if(De(t)==="html")return t;let e=t.assignedSlot||t.parentNode||Al(t)&&t.host||Q(t);return Al(e)?e.host:e}function Nl(t){let e=ue(t);return Fe(e)?t.ownerDocument?t.ownerDocument.body:t.body:Z(e)&&ft(e)?e:Nl(e)}function ut(t,e,r){var i;e===void 0&&(e=[]),r===void 0&&(r=!0);let n=Nl(t),s=n===((i=t.ownerDocument)==null?void 0:i.body),a=G(n);if(s){let l=qr(a);return e.concat(a,a.visualViewport||[],ft(n)?n:[],l&&r?ut(l):[])}return e.concat(n,ut(n,[],r))}function qr(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ll(t){let e=V(t),r=parseFloat(e.width)||0,i=parseFloat(e.height)||0,n=Z(t),s=n?t.offsetWidth:r,a=n?t.offsetHeight:i,l=Vt(r)!==s||Vt(i)!==a;return l&&(r=s,i=a),{width:r,height:i,$:l}}function en(t){return Y(t)?t:t.contextElement}function pt(t){let e=en(t);if(!Z(e))return X(1);let r=e.getBoundingClientRect(),{width:i,height:n,$:s}=Ll(e),a=(s?Vt(r.width):r.width)/i,l=(s?Vt(r.height):r.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}var vd=X(0);function Ml(t){let e=G(t);return!jr()||!e.visualViewport?vd:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function xd(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==G(t)?!1:e}function Ne(t,e,r,i){e===void 0&&(e=!1),r===void 0&&(r=!1);let n=t.getBoundingClientRect(),s=en(t),a=X(1);e&&(i?Y(i)&&(a=pt(i)):a=pt(t));let l=xd(s,r,i)?Ml(s):X(0),u=(n.left+l.x)/a.x,p=(n.top+l.y)/a.y,d=n.width/a.x,g=n.height/a.y;if(s){let m=G(s),b=i&&Y(i)?G(i):i,S=m,v=qr(S);for(;v&&i&&b!==S;){let x=pt(v),w=v.getBoundingClientRect(),O=V(v),f=w.left+(v.clientLeft+parseFloat(O.paddingLeft))*x.x,h=w.top+(v.clientTop+parseFloat(O.paddingTop))*x.y;u*=x.x,p*=x.y,d*=x.x,g*=x.y,u+=f,p+=h,S=G(v),v=qr(S)}}return Oe({width:d,height:g,x:u,y:p})}function zr(t,e){let r=Xt(t).scrollLeft;return e?e.left+r:Ne(Q(t)).left+r}function kl(t,e){let r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-zr(t,r),n=r.top+e.scrollTop;return{x:i,y:n}}function wd(t){let{elements:e,rect:r,offsetParent:i,strategy:n}=t,s=n==="fixed",a=Q(i),l=e?zt(e.floating):!1;if(i===a||l&&s)return r;let u={scrollLeft:0,scrollTop:0},p=X(1),d=X(0),g=Z(i);if((g||!g&&!s)&&((De(i)!=="body"||ft(a))&&(u=Xt(i)),Z(i))){let b=Ne(i);p=pt(i),d.x=b.x+i.clientLeft,d.y=b.y+i.clientTop}let m=a&&!g&&!s?kl(a,u):X(0);return{width:r.width*p.x,height:r.height*p.y,x:r.x*p.x-u.scrollLeft*p.x+d.x+m.x,y:r.y*p.y-u.scrollTop*p.y+d.y+m.y}}function Ed(t){return Array.from(t.getClientRects())}function Td(t){let e=Q(t),r=Xt(t),i=t.ownerDocument.body,n=le(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=le(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight),a=-r.scrollLeft+zr(t),l=-r.scrollTop;return V(i).direction==="rtl"&&(a+=le(e.clientWidth,i.clientWidth)-n),{width:n,height:s,x:a,y:l}}var Rl=25;function Id(t,e){let r=G(t),i=Q(t),n=r.visualViewport,s=i.clientWidth,a=i.clientHeight,l=0,u=0;if(n){s=n.width,a=n.height;let d=jr();(!d||d&&e==="fixed")&&(l=n.offsetLeft,u=n.offsetTop)}let p=zr(i);if(p<=0){let d=i.ownerDocument,g=d.body,m=getComputedStyle(g),b=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,S=Math.abs(i.clientWidth-g.clientWidth-b);S<=Rl&&(s-=S)}else p<=Rl&&(s+=p);return{width:s,height:a,x:l,y:u}}var Ad=new Set(["absolute","fixed"]);function Od(t,e){let r=Ne(t,!0,e==="fixed"),i=r.top+t.clientTop,n=r.left+t.clientLeft,s=Z(t)?pt(t):X(1),a=t.clientWidth*s.x,l=t.clientHeight*s.y,u=n*s.x,p=i*s.y;return{width:a,height:l,x:u,y:p}}function Cl(t,e,r){let i;if(e==="viewport")i=Id(t,r);else if(e==="document")i=Td(Q(t));else if(Y(e))i=Od(e,r);else{let n=Ml(t);i={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Oe(i)}function Wl(t,e){let r=ue(t);return r===e||!Y(r)||Fe(r)?!1:V(r).position==="fixed"||Wl(r,e)}function Dd(t,e){let r=e.get(t);if(r)return r;let i=ut(t,[],!1).filter(l=>Y(l)&&De(l)!=="body"),n=null,s=V(t).position==="fixed",a=s?ue(t):t;for(;Y(a)&&!Fe(a);){let l=V(a),u=Hr(a);!u&&l.position==="fixed"&&(n=null),(s?!u&&!n:!u&&l.position==="static"&&!!n&&Ad.has(n.position)||ft(a)&&!u&&Wl(t,a))?i=i.filter(d=>d!==a):n=l,a=ue(a)}return e.set(t,i),i}function Fd(t){let{element:e,boundary:r,rootBoundary:i,strategy:n}=t,a=[...r==="clippingAncestors"?zt(e)?[]:Dd(e,this._c):[].concat(r),i],l=a[0],u=a.reduce((p,d)=>{let g=Cl(e,d,n);return p.top=le(g.top,p.top),p.right=ct(g.right,p.right),p.bottom=ct(g.bottom,p.bottom),p.left=le(g.left,p.left),p},Cl(e,l,n));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Nd(t){let{width:e,height:r}=Ll(t);return{width:e,height:r}}function Rd(t,e,r){let i=Z(e),n=Q(e),s=r==="fixed",a=Ne(t,!0,s,e),l={scrollLeft:0,scrollTop:0},u=X(0);function p(){u.x=zr(n)}if(i||!i&&!s)if((De(e)!=="body"||ft(n))&&(l=Xt(e)),i){let b=Ne(e,!0,s,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else n&&p();s&&!i&&n&&p();let d=n&&!i&&!s?kl(n,l):X(0),g=a.left+l.scrollLeft-u.x-d.x,m=a.top+l.scrollTop-u.y-d.y;return{x:g,y:m,width:a.width,height:a.height}}function Ji(t){return V(t).position==="static"}function Pl(t,e){if(!Z(t)||V(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Q(t)===r&&(r=r.ownerDocument.body),r}function Ul(t,e){let r=G(t);if(zt(t))return r;if(!Z(t)){let n=ue(t);for(;n&&!Fe(n);){if(Y(n)&&!Ji(n))return n;n=ue(n)}return r}let i=Pl(t,e);for(;i&&Dl(i)&&Ji(i);)i=Pl(i,e);return i&&Fe(i)&&Ji(i)&&!Hr(i)?r:i||Fl(t)||r}var Cd=async function(t){let e=this.getOffsetParent||Ul,r=this.getDimensions,i=await r(t.floating);return{reference:Rd(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Pd(t){return V(t).direction==="rtl"}var Ld={convertOffsetParentRelativeRectToViewportRelativeRect:wd,getDocumentElement:Q,getClippingRect:Fd,getOffsetParent:Ul,getElementRects:Cd,getClientRects:Ed,getDimensions:Nd,getScale:pt,isElement:Y,isRTL:Pd};function Kl(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Md(t,e){let r=null,i,n=Q(t);function s(){var l;clearTimeout(i),(l=r)==null||l.disconnect(),r=null}function a(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();let p=t.getBoundingClientRect(),{left:d,top:g,width:m,height:b}=p;if(l||e(),!m||!b)return;let S=Ht(g),v=Ht(n.clientWidth-(d+m)),x=Ht(n.clientHeight-(g+b)),w=Ht(d),f={rootMargin:-S+"px "+-v+"px "+-x+"px "+-w+"px",threshold:le(0,ct(1,u))||1},h=!0;function y(_){let E=_[0].intersectionRatio;if(E!==u){if(!h)return a();E?a(!1,E):i=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!Kl(p,t.getBoundingClientRect())&&a(),h=!1}try{r=new IntersectionObserver(y,{...f,root:n.ownerDocument})}catch{r=new IntersectionObserver(y,f)}r.observe(t)}return a(!0),s}function Bl(t,e,r,i){i===void 0&&(i={});let{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=i,p=en(t),d=n||s?[...p?ut(p):[],...ut(e)]:[];d.forEach(w=>{n&&w.addEventListener("scroll",r,{passive:!0}),s&&w.addEventListener("resize",r)});let g=p&&l?Md(p,r):null,m=-1,b=null;a&&(b=new ResizeObserver(w=>{let[O]=w;O&&O.target===p&&b&&(b.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var f;(f=b)==null||f.observe(e)})),r()}),p&&!u&&b.observe(p),b.observe(e));let S,v=u?Ne(t):null;u&&x();function x(){let w=Ne(t);v&&!Kl(v,w)&&r(),v=w,S=requestAnimationFrame(x)}return r(),()=>{var w;d.forEach(O=>{n&&O.removeEventListener("scroll",r),s&&O.removeEventListener("resize",r)}),g?.(),(w=b)==null||w.disconnect(),b=null,u&&cancelAnimationFrame(S)}}var Gl=Tl;var $l=Il,Yl=El;var Vl=(t,e,r)=>{let i=new Map,n={platform:Ld,...r},s={...n.platform,_c:i};return wl(t,e,{...n,platform:s})};o();function Hl(t,e){let{launcher:r}=e.settings;if(r.type==="tab"){let i=t.includes("top"),n=t.includes("bottom");if(i||n)return r.position==="center-left"?["right"]:["left"]}}var Xr=class{constructor(e,r){this.widget=e;this.options=r;this.type="popover";this.classNames={default:"Frill_View_Popover",loading:"Frill_View_Popover--loading",open:"Frill_View_Popover--open",enter:"Frill_View_Popover--enter",mobile:"Frill_View_Popover--mobile"};this.onContainerClick=e=>{e.__frillHandled||this.element&&!this.element.contains(e.target)&&this.widget.close()}}setup(){let{frame:e,launcher:r}=this.widget,{offsetSkidding:i=0,offsetDistance:n=0,placement:s="bottom-end",isFixedPosition:a=!1,width:l="340px",height:u="460px"}=this.options,d=r.type!=="selector"||a?"fixed":"absolute";this.element=document.createElement("div"),this.element.classList.add(He,this.classNames.default,`Frill_Trigger--${r.type}`),this.element.style.width=l,this.element.style.height=u,this.element.style.display="none";let g=s.includes("top")||s.includes("bottom"),m=r.type==="selector"||r.type==="null",S=`calc(100% - 40px - ${r.type==="floating"?`${60+n}px`:0})`;this.element.style[g?"maxHeight":"maxWidth"]=S,this.element.style.position=d,this.element.appendChild(e),this.widget.parent.appendChild(this.element);let v=r.element;v||(this.reference=document.createElement("div"),this.reference.style.position="fixed",this.reference.style.bottom="20px",this.reference.style.right="20px",this.widget.parent.appendChild(this.reference),v=this.reference);let x=!(m&&a),w=this.widget.parent!==document.body?this.widget.parent:void 0;this.cleanupPopper=Bl(v,this.element,()=>{Vl(v,this.element,{placement:s,strategy:d,middleware:[Gl({mainAxis:n,crossAxis:i}),x&&Yl({fallbackPlacements:Hl(s,this.widget)}),$l({padding:20,boundary:w})]}).then(({x:O,y:f})=>{Object.assign(this.element.style,{left:`${O}px`,top:`${f}px`})})})}destroy(){this.cleanupPopper?.(),this.element?.parentNode?.removeChild(this.element),this.widget.parent.removeEventListener("click",this.onContainerClick),this.reference&&this.reference.parentNode?.removeChild(this.reference)}update(){if(!this.element)return;this.element.style.display="";let{isOpen:e,isLoading:r,isMobile:i}=this.widget.state;r?this.element.classList.add(this.classNames.loading):this.element.classList.remove(this.classNames.loading),i?this.element.classList.add(this.classNames.mobile):this.element.classList.remove(this.classNames.mobile);let n=this.element.classList.contains(this.classNames.open);e?n||(setTimeout(()=>this.widget.parent.addEventListener("click",this.onContainerClick)),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30)):(this.element.classList.remove(this.classNames.open),this.widget.parent.removeEventListener("click",this.onContainerClick))}};o();var Qr=class{constructor(e,r){this.widget=e;this.options=r;this.type="sidebar";this.classNames={default:"Frill_View_Sidebar",loading:"Frill_View_Sidebar--loading",mobile:"Frill_View_Sidebar--mobile",open:"Frill_View_Sidebar--open",enter:"Frill_View_Sidebar--enter",content:"Frill_View_Sidebar__Content",shadow:"Frill_View_Sidebar__Shadow"};this.lock=lt();this.onWidowClick=e=>{e.__frillHandled||this.element&&!this.content.contains(e.target)&&this.widget.close()}}get width(){return this.widget.state.isMobile?"100%":this.options.width||"450px"}setup(){let{frame:e}=this.widget,{position:r="right"}=this.options;this.element=document.createElement("div"),this.element.setAttribute("role","dialog"),this.element.style.display="none",this.element.classList.add(He,this.classNames.default,`${this.classNames.default}--${r}`),this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.content.style.width=this.width,this.content.appendChild(e),this.shadow=document.createElement("div"),this.shadow.classList.add(this.classNames.shadow),this.element.appendChild(this.content),this.element.appendChild(this.shadow),this.widget.parent.appendChild(this.element)}destroy(){this.lock.off(),this.shadow?.removeEventListener("click",this.onWidowClick),this.element?.parentNode?.removeChild(this.element)}update(){if(!this.element)return;this.element.style.display="";let{isOpen:e,isLoading:r,isMobile:i}=this.widget.state;r?this.element.classList.add(this.classNames.loading):this.element.classList.remove(this.classNames.loading),i?this.element.classList.add(this.classNames.mobile):this.element.classList.remove(this.classNames.mobile),this.content.style.width=this.width;let n=this.element.classList.contains(this.classNames.open);e?n||(this.options.preventScroll&&this.lock.on(),this.shadow.addEventListener("click",this.onWidowClick),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30)):(this.element.classList.remove(this.classNames.open),this.shadow.removeEventListener("click",this.onWidowClick),this.lock.off())}};function jl(t){let e=t.settings.view;switch(e.type){case"popover":return new Xr(t,e);case"modal":return new $r(t,e);case"sidebar":return new Qr(t,e);case"embed":return new Br(t,e);default:throw new C("Invalid view option. Available options: `popover`, `modal`, `sidebar` and `embed`")}}var dt=class extends rt{constructor(r,i,n){super(r,i);this.frill=r;this.config=i;this.targeter=n;this.badges=[];this.state={isMobile:!1,isOpen:!1,isLoading:!0,unreadCount:0};this.open=()=>{this.state.isOpen||!this.frame||(this.ipc.client.interaction({type:"open"}),this.state.isOpen=!0,this.update(),this.frame.focus(),this.events.emit("open",void 0))};this.close=()=>{this.state.isOpen&&(this.ipc.client.interaction({type:"close"}),this.state.isOpen=!1,this.update(),this.state.unreadCount&&this.setBadgeCount(0),this.frame&&document.activeElement===this.frame&&this.frame.blur(),this.events.emit("close",void 0))};this.destroy=()=>{this.destroyed=!0,this.ipc?.destroy(),this.style?.parentNode?.removeChild(this.style),this.launcher?.destroy(),this.view?.destroy(),this.mediaQuery?.(),this.frame=void 0,this.launcher=void 0,this.view=void 0,this.style=void 0,delete this.frill.widgets?.[this.id],this.events.emit("destroy",void 0)};this.setBadgeCount=r=>{this.state.unreadCount=r,this.update(),this.events.emit("badgeCount",{announcements:[],count:r})};this.interaction=()=>{this.ipc.client.interaction({type:"hover"})};this.onNotificationClose=()=>{this.events.emit("notificationClose",void 0)};this.getConfig=()=>({href:window.location.href,board:this.board,company:this.company,isMobile:this.state.isMobile,settings:this.settings,storage:this.store.all(),widget:this.widget});this.update=()=>{let{unreadCount:r}=this.state;if(this.launcher?.update(),this.view?.update(),this.badges.length){let{badge:i}=this.settings,n=r>0;for(let s of this.badges)s.style.display=n?"":"none",i.type==="count"&&(s.innerText=`${Math.min(r,99)}`)}};this.updateSettings=(r,i=!1)=>{if(!this.settings)return;let n=this.company.default_language;this.settings=i?Bi(r,n):Dr(this.settings,r,{language:n}),this.ipc.client.updateSettings(this.settings),this.mediaQuery?.();let{responsiveMediaQuery:s}=this.settings.appearance;s&&(this.mediaQuery=Hi(s,this.onResponsiveChange))};this.onAppReady=()=>{this.state.isLoading&&(this.state.isLoading=!1,this.update(),this.ipc.ready(),this.ipc.flush(),this.events.emit("ready",this),this.deepLink.open&&this.open())};this.onNewAnnouncements=r=>{let i=r.length;this.state.unreadCount=i,this.update(),this.events.emit("badgeCount",{announcements:r,count:i})};this.addNotification=r=>{this.frill("notification",{id:r.announcementSlug,options:r,widget:this}),this.events.emit("notificationOpen",void 0)};this.onResponsiveChange=r=>{this.state.isMobile=r,this.ipc.client.responsive({isMobile:r}),this.update()};if(!ul(i)){M("Your Frill Widget has failed to load. Please check your code snippet is correct.","Reason: Missing widget key");return}this.frill.widgets[this.id]=this;let{config:s}=fl(i);this.config=s,this.deepLink=hl(qe(window.location.search)),this.parent=this.config.container||document.body,this.ipc=new Ee(i.key,"frame",{open:this.open,close:this.close,setStorage:this.store.set,onLogin:this.onLogin,onLogout:this.onLogout,setNewAnnouncements:this.onNewAnnouncements,ready:this.onAppReady,getConfig:this.getConfig,addNotification:this.addNotification}),this.ipc.setup(),this.setup=this.create().catch(a=>{ne&&console.error(a),M("Your Frill Widget has failed to load. Please check your code snippet is correct.",`Reason: ${ae(a)?a.message:"Unexpected error"}
Widget key: ${this.config?.key||"Missing key!"}`)})}ready(){return this.setup}async create(){if(this.settings)return;let{key:r,loadStyles:i=!0,frillTokens:n,language:s,ssoToken:a,user:l,settings:u,__widget:p}=this.config,{board:d,company:g,widget:m}=p||await this.api.widget();if(this.destroyed)return;if(!m)throw new C("Widget not found");this.board=d,this.company=g,this.widget={idx:m.idx,source:m.source},this.settings=Bi(m.settings,g.default_language),u&&(this.settings=Dr(this.settings,u,{language:g.default_language}));let{badge:b}=this.settings;if(i&&(this.style=document.createElement("link"),this.style.id=`${xr}_${this.id}`,this.style.rel="stylesheet",this.style.href=Ye,this.parent.prepend(this.style)),!this.targeter&&this.settings.view.type==="embed"&&!this.config.container){let x=document.querySelector(`[${Rt}="${r}"]`);if(!x||!(x instanceof HTMLElement))throw new C(`Could not find widget embed target element [${Rt}="${r}"]`);x.hasAttribute(de)?M(`Your widget (${r}) has already been loaded. Please make sure you cleanup (destroy) the existing widget before calling Frill('widget') again.`):(x.setAttribute(de,"true"),this.parent=x)}this.launcher=al(this),this.view=jl(this);let S={key:r,route:dl(this.settings,this.deepLink)};this.frill.identity?.tokens&&this.frill.identity.tokens.scope!=="basic"&&(S.frillToken=this.frill.identity.tokens.frillToken,S.frillRefreshToken=this.frill.identity.tokens.frillRefreshToken,S.isAnonymous=this.frill.identity.tokens.email?void 0:"1"),n?(S.frillToken=n.frillToken,S.frillRefreshToken=n.frillRefreshToken,S.isAnonymous=n.email?void 0:"1"):a&&(S.ssoToken=a),s&&(S.lang=s),l&&(S.user=JSON.stringify(l)),this.config.disableAnalytics&&(S.analytics="0"),this.config.disableCookies&&(S.cookies="0"),this.config.previewMode&&(S.preview="1"),this.frill.__isFrillApp&&(S.isFrillApp="1"),this.frame=it({id:`${vr}_${this.id}`,className:_a,src:`${_r}/?${ve(S)}`});let{responsiveMediaQuery:v}=m.settings.appearance;if(v&&(this.mediaQuery=Hi(v,this.onResponsiveChange)),this.launcher.setup(),this.view.setup(),b.type!=="none"){let x=document.createElement("div");x.classList.add(Ci),x.classList.add(`${Ci}--${b.type}`),x.style.display="none",this.launcher.addBadge(x),this.badges.push(x)}this.ipc.frame=this.frame}createIdea(r){this.ipc.client.createIdea(r)}viewIdea(r,i){this.ipc.client.viewIdea(r,i)}viewAnnouncement(r){this.ipc.client.viewAnnouncement(r)}viewSection(r){this.ipc.client.viewSection(r)}markAsRead(){this.ipc.client.markAsRead(),this.setBadgeCount(0)}getCache(){return this.ipc.client.getCache()}};var Qt=class{constructor(e,r){this.frill=e;this.options=r;this.observe=!0;this.matched=!1;this.embed=this.getEmbed();this.promise=Promise.resolve();if(this.observe=kd(this.targeting)||!!this.embed,this.observe){this.check();return}this.targeting.when.action!=="api"&&(this.matched=!0,this.create())}get active(){return this.matched&&!!this.frame}get entity(){if("__widget"in this.options)return this.options.__widget.widget;if("__survey"in this.options)return this.options.__survey.survey;throw new Error("Unsupported config")}get targeting(){return this.entity.settings.targeting}get type(){if("__widget"in this.options)return"widget";if("__survey"in this.options)return"survey";throw new Error("Unsupported config")}async ready(){return this.promise}check({force:e=!1}={}){if(!this.observe&&!e)return;if(this.embed&&this.frame&&!this.embed.element?.isConnected){this.destroy();return}let r=this.matched,i=this.targeting;switch(this.matched=Oa(window.location.href,i),i.when.action){case"enter":{if(!this.matched){i.where.hide&&this.destroy();return}break}case"exit":{if(!(r&&!this.matched)){i.where.hide&&this.destroy();return}break}case"api":return;case"scroll":break}let n=i.when.delay||0;if(typeof n=="number"&&n>0){this.schedule&&clearTimeout(this.schedule),this.schedule=setTimeout(()=>{this.create()},n*1e3);return}this.create()}reset(){this.frame?.destroyed&&(this.frame=void 0),this.check({force:!0})}destroy(){if(this.schedule&&(clearTimeout(this.schedule),this.schedule=void 0),!!this.frame){this.embed&&(this.embed=this.getEmbed());try{this.frame.destroy()}catch{}this.frame=void 0}}create(){if(!this.frame){if("__widget"in this.options){this.frame=this.createWidget(this.options);return}if("__survey"in this.options){let e=this.options.__survey.company,r=this.options.__survey.survey,i=kr(r,this.options.settings,e.default_language),n=this.frill.identity||null,s=n?.userMeta.sdk||{},a=this.options.force;if(!Mr(this.frill,{surveyIdx:r.idx,settings:i,data:s,identity:n,isManual:!1})&&!a&&!this.options.previewMode){Gt(this.frill)&&(this.observe=!0);return}this.frame=this.createSurvey(this.options);return}throw new Error("Unsupported config")}}createWidget(e){if(this.embed){let i=this.embed.element;if(!i||!(i instanceof HTMLElement)||i.hasAttribute(de))return;i.setAttribute(de,"true"),e.container=i}return new dt(this.frill,e,this)}createSurvey(e){let r=new nt(this.frill,e,this);return this.promise=new Promise(i=>{r.events.on("ready",()=>i())}),r}getEmbed(){let e=this.options;return"__widget"in e&&(e.__widget.widget.settings.view.type==="embed"||e.settings?.view?.type==="embed")?{get element(){return this._element||(this._element=document.querySelector(`[${Rt}="${e.key}"]`)),this._element}}:null}};function kd(t){return t?"showAfter"in t&&t.showAfter.active||t.when.delay?!0:!(t.where.type==="all"||!t.where.urls.length):!1}o();function ql(){return"frill-sdk"}o();function zl(){return Wd("guest")}function Wd(t){return{announcementReactions:t,comments:t,ideas:t,votes:t}}function tn(t){return t==="user"}var Zr=class{constructor(e,r){this.frill=e;this.config=r;this.created=!1;this.refreshed=!0;this.destroyed=!1;this.targets=new Map;this.promise=Promise.resolve();this.match=()=>{this.targets.forEach(e=>e.check())};this.call=(e,...r)=>{let i=this.config.callbacks?.[e];i&&i(...r)};this.unidentify=()=>{this.store.remove("identity")};this.destroy=()=>{this.destroyed=!0,this.observer?.destroy(),this.observer=void 0,this.style?.parentNode?.removeChild(this.style),this.targets.forEach((e,r)=>{this.targets.delete(r),e.destroy()}),delete this.frill.containers?.[this.config.key],this.call("onDestroy")};this.config.key||M("Your Frill Container has failed to load. Please check your code snippet is correct.","Reason: Missing container key"),this.api=new Je(this.config.key,{frill:e,language:this.config.language}),this.store=new Ae(ql(),this.config.disableCookies?new et:new tt),this.container=document.body,this.promise=this.setup().catch(i=>{ne&&console.error(i),M("Your Frill Container has failed to load. Please check your code snippet is correct.",`Reason: ${ae(i)?i.message:"Unexpected error"}. Container key: ${this.config?.key||"Missing key!"}`)})}ready(){return this.promise}debug(){if(!this.settings){M("Your Frill Container has not loaded yet.");return}let{surveys:e,widgets:r}=this.settings,i=Array.from(this.targets.values()),n=this.frill.identity?.tokens?`The identified user is ${this.frill.identity.tokens.email||"anonymous"}`:"No user has been identified";Ie.log(`Your Frill Container has ${e.length} ${Wt("survey",e.length)} & ${r.length} ${Wt("widget",r.length)}, ${i.length} are currently active or idle.`),Ie.log(n,Ja(this.frill.identity?.userMeta.sdk)),i.forEach(s=>{let a=s.active,l=s.type,u=Za(s,this.frill);Ie.log(`${a?"\u{1F7E2}":"\u{1F7E0}"} ${s.entity.name} (${l})`,u)})}async setup(){Ie.debug("container:setup"),await this.store.ready(),this.frill.containers[this.config.key]=this,this.style=document.createElement("link"),this.style.id=`${xr}_${this.config.key}`,this.style.rel="stylesheet",this.style.href=Ye,this.container.prepend(this.style);let e=pl(this.config)||this.store.get("identity");e&&(this.frill.lastIdentity=e,await this.identify(e,{refresh:!1}));let r=await this.api.container();if(this.frill.identity||(this.frill.identity={frillHost:r.company.domain,userMeta:Yi({sdk:this.store.get("data")})},this.store.set("data",this.frill.identity.userMeta.sdk)),this.settings=r,this.destroyed)return;let{autoLoad:i=!0}=this.config,n=i===!0||i==="widgets"?r.widgets:[],s=i===!0||i==="surveys"?r.surveys:[];await this.create({...r,widgets:n,surveys:s}),this.checkAuthSettings(e),this.call("onCreate",this)}async refresh(){if(Ie.debug("container:refresh"),!this.created){this.refreshed=!1;return}this.refreshed=!0;let e=await this.api.container(),r=this.settings.widgets.map(a=>a.public_key),i=this.settings.surveys.map(a=>a.public_key),n=e.widgets.filter(a=>!r.includes(a.public_key)),s=e.surveys.filter(a=>!i.includes(a.public_key));!n.length&&!s.length||await this.create({...e,widgets:n,surveys:s})}async create(e){Ie.debug("container:create",e.widgets);let{ssoToken:r,language:i,disableAnalytics:n,disableCookies:s,previewMode:a,user:l,surveys:u=[],widgets:p=[]}=this.config,{board:d,company:g,widgets:m=[],surveys:b=[]}=e,v=!!r&&Pt(r)?r:null,x=!1;for(let w of m){let O=p.find(_=>_.key==="all"||_.key===w.public_key),f={ssoToken:v,disableAnalytics:n,disableCookies:s,language:i,previewMode:a,user:l,...O,key:w.public_key,loadStyles:!1,__widget:{board:d,company:g,widget:w}},h=f.id||f.key,y=new Qt(this.frill,f);this.targets.set(h,y),x||(x=y.observe)}for(let w of b){let O=u.find(_=>_.key==="all"||_.key===w.public_key),f={ssoToken:v,disableAnalytics:n,disableCookies:s,language:i,previewMode:a,user:l,...O,key:w.public_key,loadStyles:!1,__survey:{company:g,survey:w}},h=f.id||f.key,y=new Qt(this.frill,f);this.targets.set(h,y),await y.ready(),x||(x=y.observe)}x&&!this.observer&&(this.observer=new ot,this.observer.on(this.match)),this.created=!0,this.refreshed||await this.refresh()}async identify(e,{refresh:r=!0}){if(st(e))this.frill.identity=e;else{this.checkAuthSettings(e);try{let{token:i,refreshToken:n,scope:s,frillHost:a,userMeta:l,userIdx:u,profile:p}=await this.api.identify(e);if(this.frill.lastIdentity!==e)return;let d={tokens:{idx:u,frillToken:i,frillRefreshToken:n,scope:s,email:"email"in e?e.email:""},frillHost:a,userMeta:l};Lt(e)&&!p.is_guest&&(this.config.disableWarnings||M("You have identified a guest user, but the email is associated with an email/password account. This will work fine for Surveys, but the User will be asked to login if they interact (vote, comment, etc.) with a Widget. You can disable this warning by setting disableWarnings: true.")),d.userMeta.sdk||(d.userMeta.sdk=this.store.get("data"),this.store.remove("data")),this.frill.identity=d}catch{}}if(this.frill.identity&&(this.frill.identity.userMeta=Yi(this.frill.identity.userMeta),this.frill.identity.tokens)){let{sdk:i}=this.frill.identity.userMeta;await this.api.meta({sdk:i}).catch(n=>{})}this.targets.forEach(i=>i.reset()),r&&await this.refresh()}storeUserTokens(e,r){let i=this.store.get("identity");if(!(0,kt.default)(i,e)){this.store.set("identity",e),this.store.write();for(let n of Object.values(this.frill.widgets))n!==r&&(e?n.identify(e):n.unidentify());for(let n of Object.values(this.frill.surveys))n!==r&&(e?n.identify(e):n.unidentify())}}checkAuthSettings(e){if(!this.settings)return;let{autoLoad:r=!0,ssoToken:i,disableWarnings:n=!1}=this.config,{auth_settings:s,sso_settings:a}=this.settings.company,l=!!(a?.sso_enabled&&a?.sso_allow_email_signup),u=!!i&&Pt(i);if(n)return;i&&!u&&M("Your Frill SSO Token has been ignored because it is not a valid JWT. Please check your code snippet is correct.");let p=s||zl(),d=Object.values(p).some(tn),g=[];for(let m of Object.values(this.frill.widgets)){if(!m.settings)continue;let b=m.settings.advanced.authentication;(b?tn(b):d)&&g.push(m)}if(g.length){if(Lt(e)){M(`You have identified a guest user, but ${g.length} of your widgets require user (${l?"SSO":"email/password"}) authentication. The user has been identified, but they may be asked to log in when they use the widget. If you want to use guest authentication (no login) please enable it at a company level, or turn it on for each widget.`);return}r&&!e&&l&&!i&&M(`You have not provided a Frill SSO Token, but ${g.length} of your widgets require SSO authentication. If you want users to be able to interact with the widget please enable guest (or anonymous) authentication for each widget.`,"If you plan to identify an SSO user later, you can disable this warning by setting disableWarnings: true, or delay loading of widgets with autoLoad: false.")}}};o();o();var Jr=class{constructor(e,r){this.frill=e;this.config=r;this.type="modal";this.classNames={default:"Frill_Notification_Banner",loading:"Frill_Notification_Banner--loading",open:"Frill_Notification_Banner--open",enter:"Frill_Notification_Banner--enter",content:"Frill_Notification_Banner__Content",top:"Frill_Notification_Banner--top",bottom:"Frill_Notification_Banner--bottom"};this.destroy=()=>{delete this.frill.notifications[this.id],this.element&&(this.element.parentNode?.removeChild(this.element),this.widget.onNotificationClose())};this.open=()=>{this.element&&(this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30))};this.close=()=>{this.element.classList.remove(this.classNames.open),setTimeout(()=>{this.destroy()},300)};this.frill.notifications[this.id]=this,this.setup()}get id(){return this.config.id}get options(){return this.config.options}get widget(){return this.config.widget}setup(){let{title:e,position:r}=this.options,{settings:i,company:n}=this.widget.getConfig(),s=i.appearance.theme.idx||n.theme?.idx||"light";if(this.element=document.createElement("div"),this.element.classList.add(me,this.classNames.default,this.classNames[r||"top"],`${me}--${s}`),this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.options.badge){let u=Cr(this.options.badge);this.content.appendChild(u)}let a=document.createElement("h2");if(a.innerText=e,this.content.appendChild(a),this.options.button){let u=Lr(this.widget,this.options,this.close);this.content.appendChild(u)}let l=Pr();l.addEventListener("click",this.close),this.content.appendChild(l),this.element.appendChild(this.content),this.widget.parent.appendChild(this.element),this.open()}};o();var ei=class{constructor(e,r){this.frill=e;this.config=r;this.type="modal";this.classNames={default:"Frill_Notification_Modal",loading:"Frill_Notification_Modal--loading",open:"Frill_Notification_Modal--open",enter:"Frill_Notification_Modal--enter",content:"Frill_Notification_Modal__Content",shadow:"Frill_Notification_Modal__Shadow"};this.lock=lt();this.destroy=()=>{this.lock.off(),this.ipc.destroy(),delete this.frill.notifications[this.id],this.element&&this.element.parentNode?.removeChild(this.element)};this.close=()=>{this.element.classList.remove(this.classNames.open),this.shadow.removeEventListener("click",this.onWidowClick),this.lock.off(),setTimeout(()=>{this.destroy(),this.widget.onNotificationClose()},300)};this.onWidowClick=e=>{e.__frillHandled||this.element&&!this.content.contains(e.target)&&this.close()};this.getConfig=async()=>{let e=this.options.__cache||await this.widget.getCache(),r=this.widget.getConfig();return r.cache=e,r.settings.appearance.showCloseButton=this.options.showCloseButton,r};this.onAppReady=()=>{this.ipc.ready(),this.ipc.flush(),this.open()};this.frill.notifications[this.id]=this,this.ipc=new Tr(this.widget.config.key,"modal",{ready:this.onAppReady,getConfig:this.getConfig,close:this.close,open:()=>{},setStorage:()=>{},onLogin:()=>{},onLogout:()=>{},setNewAnnouncements:()=>{},addNotification:()=>{}}),this.ipc.setup(),this.setup()}get id(){return this.config.id}get options(){return this.config.options}get widget(){return this.config.widget}setup(){let{announcementSlug:e,width:r,height:i}=this.options;this.element=document.createElement("div"),this.element.classList.add(me,this.classNames.default);let{key:n,frillTokens:s,ssoToken:a,user:l}=this.widget.config,u=it({id:`${vr}_${n}_notification`,src:`${_r}/?${ve({key:n,frillToken:s?.frillToken,frillRefreshToken:s?.frillRefreshToken,user:JSON.stringify(l),ssoToken:a,notification:"1",route:ml(e)})}`});this.ipc.frame=u,this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.content.style.width=r?.replace("%","vw")||"640px",this.content.style.height=i?.replace("%","vh")||"500px",this.content.appendChild(u),this.shadow=document.createElement("div"),this.shadow.classList.add(this.classNames.shadow),this.element.appendChild(this.content),this.element.appendChild(this.shadow),this.widget.parent.appendChild(this.element),this.open()}open(){this.element&&(this.lock.on(),this.shadow.addEventListener("click",this.onWidowClick),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30))}};o();var ti=class{constructor(e,r){this.frill=e;this.config=r;this.type="modal";this.classNames={default:"Frill_Notification_Snippet",loading:"Frill_Notification_Snippet--loading",open:"Frill_Notification_Snippet--open",enter:"Frill_Notification_Snippet--enter",content:"Frill_Notification_Snippet__Content",imageTop:"Frill_Notification_Snippet__Image_Top",imageLeft:"Frill_Notification_Snippet__Image_Left"};this.destroy=()=>{delete this.frill.notifications[this.id],this.element&&(this.element.parentNode?.removeChild(this.element),this.widget.onNotificationClose())};this.open=()=>{this.element&&(this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30))};this.close=()=>{this.element.classList.remove(this.classNames.open),setTimeout(()=>{this.destroy()},300)};this.frill.notifications[this.id]=this,this.setup()}get id(){return this.config.id}get options(){return this.config.options}get widget(){return this.config.widget}setup(){let{title:e="",content:r="",image:i={url:"",position:"top"},theme:n}=this.options,{settings:s,company:a}=this.widget.getConfig(),l=n?.idx||s.appearance.theme.idx||a.theme?.idx||"light";if(this.element=document.createElement("div"),this.element.classList.add(me,this.classNames.default,`${me}--${l}`),this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),i.url&&(i.position==="left"?(this.image=document.createElement("img"),this.image.classList.add(this.classNames.imageLeft),this.image.src=i.url,this.element.appendChild(this.image)):(this.image=document.createElement("img"),this.image.classList.add(this.classNames.imageTop),this.image.src=i.url,this.content.appendChild(this.image))),this.options.badge){let g=Cr(this.options.badge);this.content.appendChild(g)}let u=document.createElement("h2");u.innerText=e,this.content.appendChild(u);let p=document.createElement("p");if(p.innerText=r,this.content.appendChild(p),this.options.button){let g=Lr(this.widget,this.options,this.close);this.content.appendChild(g)}let d=Pr();d.addEventListener("click",this.close),this.content.appendChild(d),this.element.appendChild(this.content),this.widget.parent.appendChild(this.element),this.open()}};function Xl(t,e){switch(e.options.type){case"snippet":return new ti(t,e);case"banner":return new Jr(t,e);case"modal":return new ei(t,e);default:throw new C("Invalid launcher option. Available options: `floating`, `selector` and `tray`")}}var Ud=window.Frill?.q||{};function nn(){return Object.values(k.containers)}function Ql(){return Object.values(k.surveys)}function Zl(){return Object.values(k.widgets)}function Kd(){return Object.values(k.notifications)}function Bd(){return[...Ql(),...Zl()]}function Gd(t){let e=t.id||t.key,r=k.surveys[e];return r||(r=new nt(k,t)),r}function $d(t){let e=t.id||t.key,r=k.widgets[e];return r?r.destroyed||t.callbacks?.onReady?.(r):r=new dt(k,t),r}function Yd(t){let e=t.id,r=k.notifications[e];if(!r){if(Kd().length&&!t.force)return;r=Xl(k,t)}return r}async function Vd(t){let e=k.containers[t.key];return e||(e=new Zr(k,t),await e.ready()),e}function rn(t){let e=t.ready?t.ready().then(()=>t):new Promise(r=>r(t));return e.destroy=t?.destroy||function(){},e}async function Hd(t){let e=st(t)?t:cl(t);if(!e)return Jl();if((0,kt.default)(e,k.lastIdentity))return;k.lastIdentity=e;let r=nn()[0];r?await r.identify(e,{refresh:!0}):Kt("Frill('identify')");for(let i of Zl()){let n=Vi(k,e,"widget");i.identify(n)}for(let i of Ql()){let n=Vi(k,e,"survey");i.identify(n)}}async function Jl(){delete k.identity,delete k.lastIdentity;let t=nn()[0];t&&t.unidentify();for(let e of Bd())e.unidentify()}function jd(){let t=nn()[0];if(!t){M("You have not loaded a Container, so your Surveys or Widgets will be created manually. Call Frill('container', { key: 'YOUR-KEY-HERE' }) to automatically create them.");return}t.debug()}function ec(t,e){switch(t){case"identify":return Hd(e);case"unidentify":return Jl();case"help":return jd();case"container":return Vd(e);case"notification":return rn(Yd(e));case"survey":return rn(Gd(e));case"widget":return rn($d(e));default:throw new Error(`Unsupported method: ${t}`)}}async function tc(){for(let{params:t,resolve:e,reject:r}of Object.values(Ud))try{await ec(...t).then(e)}catch(i){r(i)}}var k=Object.assign(ec,{history:[],lastIdentity:void 0,ready:!0,q:{},containers:{},notifications:{},surveys:{},widgets:{},__isFrillApp:window.Frill?.__isFrillApp});window.Frill=k;tc();})();
/*! Bundled license information:

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)
*/
